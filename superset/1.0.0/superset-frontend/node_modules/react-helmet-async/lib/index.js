function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),r=e(t),n=e(require("prop-types")),i=e(require("react-fast-compare")),o=e(require("invariant")),a=e(require("shallowequal"));function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function u(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(i[r]=e[r]);return i}var l={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},p=Object.keys(l).map(function(e){return l[e]}),f={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},d=Object.keys(f).reduce(function(e,t){return e[f[t]]=t,e},{}),h=function(e,t){for(var r=e.length-1;r>=0;r-=1){var n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},m=function(e){var t=h(e,l.TITLE),r=h(e,"titleTemplate");if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,function(){return t});var n=h(e,"defaultTitle");return t||n||void 0},y=function(e){return h(e,"onChangeClientState")||function(){}},T=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return s({},e,t)},{})},b=function(e,t){return t.filter(function(e){return void 0!==e[l.BASE]}).map(function(e){return e[l.BASE]}).reverse().reduce(function(t,r){if(!t.length)for(var n=Object.keys(r),i=0;i<n.length;i+=1){var o=n[i].toLowerCase();if(-1!==e.indexOf(o)&&r[o])return t.concat(r)}return t},[])},g=function(e,t,r){var n={};return r.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&console&&"function"==typeof console.warn&&console.warn("Helmet: "+e+' should be of type "Array". Instead found type "'+typeof t[e]+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,r){var i={};r.filter(function(e){for(var r,o=Object.keys(e),a=0;a<o.length;a+=1){var s=o[a],c=s.toLowerCase();-1===t.indexOf(c)||"rel"===r&&"canonical"===e[r].toLowerCase()||"rel"===c&&"stylesheet"===e[c].toLowerCase()||(r=c),-1===t.indexOf(s)||"innerHTML"!==s&&"cssText"!==s&&"itemprop"!==s||(r=s)}if(!r||!e[r])return!1;var u=e[r].toLowerCase();return n[r]||(n[r]={}),i[r]||(i[r]={}),!n[r][u]&&(i[r][u]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var o=Object.keys(i),a=0;a<o.length;a+=1){var c=o[a],u=s({},n[c],i[c]);n[c]=u}return e},[]).reverse()},v=function(e){return Array.isArray(e)?e.join(""):e},A=[l.NOSCRIPT,l.SCRIPT,l.STYLE],C=function(e,t){return void 0===t&&(t=!0),!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},O=function(e){return Object.keys(e).reduce(function(t,r){var n=void 0!==e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n},"")},E=function(e,t){return void 0===t&&(t={}),Object.keys(e).reduce(function(t,r){return t[f[r]||r]=e[r],t},t)},S=function(e,t,n){switch(e){case l.TITLE:return{toComponent:function(){return n=t.titleAttributes,(i={key:e=t.title})["data-rh"]=!0,o=E(n,i),[r.createElement(l.TITLE,o,e)];var e,n,i,o},toString:function(){return function(e,t,r,n){var i=O(r),o=v(t);return i?"<"+e+' data-rh="true" '+i+">"+C(o,n)+"</"+e+">":"<"+e+' data-rh="true">'+C(o,n)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return E(t)},toString:function(){return O(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,n){var i,o=((i={key:n})["data-rh"]=!0,i);return Object.keys(t).forEach(function(e){var r=f[e]||e;"innerHTML"===r||"cssText"===r?o.dangerouslySetInnerHTML={__html:t.innerHTML||t.cssText}:o[r]=t[e]}),r.createElement(e,o)})}(e,t)},toString:function(){return function(e,t,r){return t.reduce(function(t,n){var i=Object.keys(n).filter(function(e){return!("innerHTML"===e||"cssText"===e)}).reduce(function(e,t){var i=void 0===n[t]?t:t+'="'+C(n[t],r)+'"';return e?e+" "+i:i},""),o=n.innerHTML||n.cssText||"",a=-1===A.indexOf(e);return t+"<"+e+' data-rh="true" '+i+(a?"/>":">"+o+"</"+e+">")},"")}(e,t,n)}}}},I=function(e){var t=e.bodyAttributes,r=e.encode,n=e.htmlAttributes,i=e.linkTags,o=e.metaTags,a=e.noscriptTags,s=e.scriptTags,c=e.styleTags,u=e.title,p=void 0===u?"":u,f=e.titleAttributes;return{base:S(l.BASE,e.baseTag,r),bodyAttributes:S("bodyAttributes",t,r),htmlAttributes:S("htmlAttributes",n,r),link:S(l.LINK,i,r),meta:S(l.META,o,r),noscript:S(l.NOSCRIPT,a,r),script:S(l.SCRIPT,s,r),style:S(l.STYLE,c,r),title:S(l.TITLE,{title:p,titleAttributes:f},r)}},P=r.createContext({}),x=n.shape({setHelmet:n.func,helmetInstances:n.shape({get:n.func,add:n.func,remove:n.func})}),L="undefined"!=typeof document,j=function(e){function t(r){var n;return(n=e.call(this,r)||this).instances=[],n.value={setHelmet:function(e){n.props.context.helmet=e},helmetInstances:{get:function(){return n.instances},add:function(e){n.instances.push(e)},remove:function(e){var t=n.instances.indexOf(e);n.instances.splice(t,1)}}},t.canUseDOM||(r.context.helmet=I({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),n}return c(t,e),t.prototype.render=function(){return r.createElement(P.Provider,{value:this.value},this.props.children)},t}(t.Component);j.canUseDOM=L,j.propTypes={context:n.shape({helmet:n.shape()}),children:n.node.isRequired},j.defaultProps={context:{}},j.displayName="HelmetProvider";var w=function(e,t){var r,n=document.head||document.querySelector(l.HEAD),i=n.querySelectorAll(e+"[data-rh]"),o=[].slice.call(i),a=[];return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&("innerHTML"===i?n.innerHTML=t.innerHTML:"cssText"===i?n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText)):n.setAttribute(i,void 0===t[i]?"":t[i]));n.setAttribute("data-rh","true"),o.some(function(e,t){return r=t,n.isEqualNode(e)})?o.splice(r,1):a.push(n)}),o.forEach(function(e){return e.parentNode.removeChild(e)}),a.forEach(function(e){return n.appendChild(e)}),{oldTags:o,newTags:a}},H=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute("data-rh"),i=n?n.split(","):[],o=[].concat(i),a=Object.keys(t),s=0;s<a.length;s+=1){var c=a[s],u=t[c]||"";r.getAttribute(c)!==u&&r.setAttribute(c,u),-1===i.indexOf(c)&&i.push(c);var l=o.indexOf(c);-1!==l&&o.splice(l,1)}for(var p=o.length-1;p>=0;p-=1)r.removeAttribute(o[p]);i.length===o.length?r.removeAttribute("data-rh"):r.getAttribute("data-rh")!==a.join(",")&&r.setAttribute("data-rh",a.join(","))}},k=function(e,t){var r=e.baseTag,n=e.htmlAttributes,i=e.linkTags,o=e.metaTags,a=e.noscriptTags,s=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,p=e.title,f=e.titleAttributes;H(l.BODY,e.bodyAttributes),H(l.HTML,n),function(e,t){void 0!==e&&document.title!==e&&(document.title=v(e)),H(l.TITLE,t)}(p,f);var d={baseTag:w(l.BASE,r),linkTags:w(l.LINK,i),metaTags:w(l.META,o),noscriptTags:w(l.NOSCRIPT,a),scriptTags:w(l.SCRIPT,c),styleTags:w(l.STYLE,u)},h={},m={};Object.keys(d).forEach(function(e){var t=d[e],r=t.newTags,n=t.oldTags;r.length&&(h[e]=r),n.length&&(m[e]=d[e].oldTags)}),t&&t(),s(e,h,m)},M=null,N=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).rendered=!1,t}c(t,e);var r=t.prototype;return r.shouldComponentUpdate=function(e){return!a(e,this.props)},r.componentDidUpdate=function(){this.emitChange()},r.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},r.emitChange=function(){var e,t,r=this.props.context,n=r.setHelmet,i=null,o=(e=r.helmetInstances.get().map(function(e){var t=s({},e.props);return delete t.context,t}),{baseTag:b(["href"],e),bodyAttributes:T("bodyAttributes",e),defer:h(e,"defer"),encode:h(e,"encodeSpecialCharacters"),htmlAttributes:T("htmlAttributes",e),linkTags:g(l.LINK,["rel","href"],e),metaTags:g(l.META,["name","charset","http-equiv","property","itemprop"],e),noscriptTags:g(l.NOSCRIPT,["innerHTML"],e),onChangeClientState:y(e),scriptTags:g(l.SCRIPT,["src","innerHTML"],e),styleTags:g(l.STYLE,["cssText"],e),title:m(e),titleAttributes:T("titleAttributes",e)});j.canUseDOM?(t=o,M&&cancelAnimationFrame(M),t.defer?M=requestAnimationFrame(function(){k(t,function(){M=null})}):(k(t),M=null)):I&&(i=I(o)),n(i)},r.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},r.render=function(){return this.init(),null},t}(t.Component);N.propTypes={context:x.isRequired},N.displayName="HelmetDispatcher";var R=function(e){function t(){return e.apply(this,arguments)||this}c(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return!i(this.props,e)},n.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case l.SCRIPT:case l.NOSCRIPT:return{innerHTML:t};case l.STYLE:return{cssText:t};default:throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},n.flattenArrayTypeChildren=function(e){var t,r=e.child,n=e.arrayTypeChildren;return s({},n,((t={})[r.type]=[].concat(n[r.type]||[],[s({},e.newChildProps,this.mapNestedChildrenToProps(r,e.nestedChildren))]),t))},n.mapObjectTypeChildren=function(e){var t,r,n=e.child,i=e.newProps,o=e.newChildProps,a=e.nestedChildren;switch(n.type){case l.TITLE:return s({},i,((t={})[n.type]=a,t.titleAttributes=s({},o),t));case l.BODY:return s({},i,{bodyAttributes:s({},o)});case l.HTML:return s({},i,{htmlAttributes:s({},o)});default:return s({},i,((r={})[n.type]=s({},o),r))}},n.mapArrayTypeChildrenToProps=function(e,t){var r=s({},t);return Object.keys(e).forEach(function(t){var n;r=s({},r,((n={})[t]=e[t],n))}),r},n.warnOnInvalidChildren=function(e,t){return o(p.some(function(t){return e.type===t}),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+p.join(", ")+" are allowed. Helmet does not support rendering <"+e.type+"> elements. Refer to our API for more information."),o(!t||"string"==typeof t||Array.isArray(t)&&!t.some(function(e){return"string"!=typeof e}),"Helmet expects a string as a child of <"+e.type+">. Did you forget to wrap your children in braces? ( <"+e.type+">{``}</"+e.type+"> ) Refer to our API for more information."),!0},n.mapChildrenToProps=function(e,t){var n=this,i={};return r.Children.forEach(e,function(e){if(e&&e.props){var r=e.props,o=r.children,a=u(r,["children"]),s=Object.keys(a).reduce(function(e,t){return e[d[t]||t]=a[t],e},{}),c=e.type;switch("symbol"==typeof c?c=c.toString():n.warnOnInvalidChildren(e,o),c){case l.FRAGMENT:t=n.mapChildrenToProps(o,t);break;case l.LINK:case l.META:case l.NOSCRIPT:case l.SCRIPT:case l.STYLE:i=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:i,newChildProps:s,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:o})}}}),this.mapArrayTypeChildrenToProps(i,t)},n.render=function(){var e=this.props,t=e.children,n=s({},u(e,["children"]));return t&&(n=this.mapChildrenToProps(t,n)),r.createElement(P.Consumer,null,function(e){return r.createElement(N,s({},n,{context:e}))})},t}(t.Component);R.propTypes={base:n.object,bodyAttributes:n.object,children:n.oneOfType([n.arrayOf(n.node),n.node]),defaultTitle:n.string,defer:n.bool,encodeSpecialCharacters:n.bool,htmlAttributes:n.object,link:n.arrayOf(n.object),meta:n.arrayOf(n.object),noscript:n.arrayOf(n.object),onChangeClientState:n.func,script:n.arrayOf(n.object),style:n.arrayOf(n.object),title:n.string,titleAttributes:n.object,titleTemplate:n.string},R.defaultProps={defer:!0,encodeSpecialCharacters:!0},R.displayName="Helmet",exports.Helmet=R,exports.HelmetProvider=j;
//# sourceMappingURL=index.js.map
