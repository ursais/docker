{"version":3,"sources":["../../../src/context/create-headless-context.js"],"names":["ERR_HEADLESSGL_NOT_AVAILABLE","ERR_HEADLESSGL_FAILED","createHeadlessContext","options","width","height","webgl1","webgl2","onError","headlessGL","gl"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,4BAA4B,GAChC,sEADF;AAGA,IAAMC,qBAAqB,GACzB,sEADF;;AAIO,SAASC,qBAAT,CAA+BC,OAA/B,EAAwC;AAAA,MACtCC,KADsC,GACID,OADJ,CACtCC,KADsC;AAAA,MAC/BC,MAD+B,GACIF,OADJ,CAC/BE,MAD+B;AAAA,MACvBC,MADuB,GACIH,OADJ,CACvBG,MADuB;AAAA,MACfC,MADe,GACIJ,OADJ,CACfI,MADe;AAAA,MACPC,OADO,GACIL,OADJ,CACPK,OADO;;AAE7C,MAAID,MAAM,IAAI,CAACD,MAAf,EAAuB;AACrB,WAAOE,OAAO,CAAC,qCAAD,CAAd;AACD;;AACD,MAAI,CAACC,sBAAL,EAAiB;AACf,WAAOD,OAAO,CAACR,4BAAD,CAAd;AACD;;AACD,MAAMU,EAAE,GAAG,4BAAWN,KAAX,EAAkBC,MAAlB,EAA0BF,OAA1B,CAAX;;AACA,MAAI,CAACO,EAAL,EAAS;AACP,WAAOF,OAAO,CAACP,qBAAD,CAAd;AACD;;AACD,SAAOS,EAAP;AACD","sourcesContent":["import {headlessGL} from '../webgl-utils/webgl-types';\n\nconst ERR_HEADLESSGL_NOT_AVAILABLE =\n  'Failed to create WebGL context in Node.js, headless gl not available';\n\nconst ERR_HEADLESSGL_FAILED =\n  'Failed to create WebGL context in Node.js, headless gl returned null';\n\n// Create headless gl context (for running under Node.js)\nexport function createHeadlessContext(options) {\n  const {width, height, webgl1, webgl2, onError} = options;\n  if (webgl2 && !webgl1) {\n    return onError('headless-gl does not support WebGL2');\n  }\n  if (!headlessGL) {\n    return onError(ERR_HEADLESSGL_NOT_AVAILABLE);\n  }\n  const gl = headlessGL(width, height, options);\n  if (!gl) {\n    return onError(ERR_HEADLESSGL_FAILED);\n  }\n  return gl;\n}\n"],"file":"create-headless-context.js"}