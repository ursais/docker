{"version":3,"sources":["../../../src/multipass/texture-pass.js"],"names":["default","ClipSpace","Pass","fs","TexturePass","constructor","gl","options","Object","assign","id","texture","opacity","clipspace","uniforms","uDiffuseSampler","uOpacity","delete","_renderPass","draw","parameters","depthWrite","depthTest"],"mappings":"AAMA,SAAQA,OAAO,IAAIC,SAAnB,QAAmC,mBAAnC;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,MAAMC,EAAE,4LAAR;AAWA,eAAe,MAAMC,WAAN,SAA0BF,IAA1B,CAA+B;AAC5CG,EAAAA,WAAW,CAACC,EAAD,EAAKC,OAAO,GAAG,EAAf,EAAmB;AAC5B,UAAMD,EAAN,EAAUE,MAAM,CAACC,MAAP,CAAc;AAACC,MAAAA,EAAE,EAAE;AAAL,KAAd,EAAoCH,OAApC,CAAV;AACA,UAAM;AAACI,MAAAA,OAAD;AAAUC,MAAAA,OAAO,GAAG;AAApB,QAA2BL,OAAjC;AACA,SAAKM,SAAL,GAAiB,IAAIZ,SAAJ,CAAcK,EAAd,EAAkB;AACjCI,MAAAA,EAAE,EAAE,cAD6B;AAEjCP,MAAAA,EAFiC;AAGjCW,MAAAA,QAAQ,EAAE;AACRC,QAAAA,eAAe,EAAEJ,OADT;AAERK,QAAAA,QAAQ,EAAEJ;AAFF;AAHuB,KAAlB,CAAjB;AAQD;;AAEDK,EAAAA,MAAM,GAAG;AACP,SAAKJ,SAAL,CAAeI,MAAf;AACA,UAAMA,MAAN;AACD;;AAEDC,EAAAA,WAAW,GAAG;AACZ,SAAKL,SAAL,CAAeM,IAAf,CAAoB;AAClBC,MAAAA,UAAU,EAAE;AACVC,QAAAA,UAAU,EAAE,KADF;AAEVC,QAAAA,SAAS,EAAE;AAFD;AADM,KAApB;AAMD;;AA1B2C","sourcesContent":["//\n// A pass that renders a given texture into screen space\n//\n// Attribution: This class and the multipass system were inspired by\n// the THREE.js EffectComposer and *Pass classes\n\nimport {default as ClipSpace} from '../lib/clip-space';\nimport Pass from './pass';\n\nconst fs = `\\\nuniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n`;\n\nexport default class TexturePass extends Pass {\n  constructor(gl, options = {}) {\n    super(gl, Object.assign({id: 'texture-pass'}, options));\n    const {texture, opacity = 1.0} = options;\n    this.clipspace = new ClipSpace(gl, {\n      id: 'texture-pass',\n      fs,\n      uniforms: {\n        uDiffuseSampler: texture,\n        uOpacity: opacity\n      }\n    });\n  }\n\n  delete() {\n    this.clipspace.delete();\n    super.delete();\n  }\n\n  _renderPass() {\n    this.clipspace.draw({\n      parameters: {\n        depthWrite: false,\n        depthTest: false\n      }\n    });\n  }\n}\n"],"file":"texture-pass.js"}