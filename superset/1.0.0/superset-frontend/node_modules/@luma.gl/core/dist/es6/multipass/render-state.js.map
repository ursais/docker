{"version":3,"sources":["../../../src/multipass/render-state.js"],"names":["Framebuffer","RenderState","constructor","gl","props","framebuffer1","id","stencil","framebuffer2","reset","resize","writeBuffer","readBuffer","maskActive","delete","_swapFramebuffers","tmp"],"mappings":"AAMA,SAAQA,WAAR,QAA0B,gBAA1B;AAEA,eAAe,MAAMC,WAAN,CAAkB;AAC/BC,EAAAA,WAAW,CAACC,EAAD,EAAKC,KAAK,GAAG,EAAb,EAAiB;AAC1B,SAAKD,EAAL,GAAUA,EAAV;AAEA,SAAKE,YAAL,GAAoB,IAAIL,WAAJ,CAAgBG,EAAhB,EAAoB;AAACG,MAAAA,EAAE,EAAE,cAAL;AAAqBC,MAAAA,OAAO,EAAE;AAA9B,KAApB,CAApB;AACA,SAAKC,YAAL,GAAoB,IAAIR,WAAJ,CAAgBG,EAAhB,EAAoB;AAACG,MAAAA,EAAE,EAAE,cAAL;AAAqBC,MAAAA,OAAO,EAAE;AAA9B,KAApB,CAApB;AAEA,SAAKE,KAAL;AACD;;AAEDA,EAAAA,KAAK,GAAG;AACN,SAAKJ,YAAL,CAAkBK,MAAlB;AACA,SAAKF,YAAL,CAAkBE,MAAlB;AAEA,SAAKC,WAAL,GAAmB,KAAKN,YAAxB;AACA,SAAKO,UAAL,GAAkB,KAAKJ,YAAvB;AAEA,SAAKK,UAAL,GAAkB,KAAlB;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,SAAKT,YAAL,CAAkBS,MAAlB;AACA,SAAKN,YAAL,CAAkBM,MAAlB;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,GAAG,GAAG,KAAKJ,UAAjB;AACA,SAAKA,UAAL,GAAkB,KAAKD,WAAvB;AACA,SAAKA,WAAL,GAAmBK,GAAnB;AACD;;AA7B8B","sourcesContent":["//\n// Render state helper class for the multi pass system\n//\n// Attribution: This class and the multipass system were inspired by\n// the THREE.js EffectComposer and *Pass classes\n\nimport {Framebuffer} from '@luma.gl/webgl';\n\nexport default class RenderState {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n\n    this.framebuffer1 = new Framebuffer(gl, {id: 'multi-pass-1', stencil: true});\n    this.framebuffer2 = new Framebuffer(gl, {id: 'multi-pass-2', stencil: true});\n\n    this.reset();\n  }\n\n  reset() {\n    this.framebuffer1.resize();\n    this.framebuffer2.resize();\n\n    this.writeBuffer = this.framebuffer1;\n    this.readBuffer = this.framebuffer2;\n\n    this.maskActive = false;\n  }\n\n  delete() {\n    this.framebuffer1.delete();\n    this.framebuffer2.delete();\n  }\n\n  _swapFramebuffers() {\n    const tmp = this.readBuffer;\n    this.readBuffer = this.writeBuffer;\n    this.writeBuffer = tmp;\n  }\n}\n"],"file":"render-state.js"}