{"version":3,"sources":["../../../src/multipass/copy-pass.js"],"names":["ClipSpace","Pass","fs","CopyPass","constructor","gl","props","Object","assign","id","swap","clipspace","delete","_renderPass","inputBuffer","opacity","draw","uniforms","uDiffuseSampler","uOpacity","parameters","depthWrite","depthTest"],"mappings":"AAMA,OAAOA,SAAP,MAAsB,mBAAtB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,MAAMC,EAAE,8LAAR;AAYA,eAAe,MAAMC,QAAN,SAAuBF,IAAvB,CAA4B;AACzCG,EAAAA,WAAW,CAACC,EAAD,EAAKC,KAAK,GAAG,EAAb,EAAiB;AAC1B,UAAMD,EAAN,EAAUE,MAAM,CAACC,MAAP,CAAc;AAACC,MAAAA,EAAE,EAAE,WAAL;AAAkBC,MAAAA,IAAI,EAAE;AAAxB,KAAd,EAA6CJ,KAA7C,CAAV;AACA,SAAKK,SAAL,GAAiB,IAAIX,SAAJ,CAAcK,EAAd,EAAkB;AAACI,MAAAA,EAAE,EAAE,WAAL;AAAkBP,MAAAA;AAAlB,KAAlB,CAAjB;AACD;;AAEDU,EAAAA,MAAM,GAAG;AACP,UAAMA,MAAN;AACA,SAAKD,SAAL,CAAeC,MAAf;AACD;;AAEDC,EAAAA,WAAW,CAAC;AAACC,IAAAA;AAAD,GAAD,EAAgB;AACzB,UAAM;AAACC,MAAAA,OAAO,GAAG;AAAX,QAAkB,KAAKT,KAA7B;AAEA,SAAKK,SAAL,CAAeK,IAAf,CAAoB;AAClBC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,eAAe,EAAEJ,WADT;AAERK,QAAAA,QAAQ,EAAEJ;AAFF,OADQ;AAKlBK,MAAAA,UAAU,EAAE;AACVC,QAAAA,UAAU,EAAE,KADF;AAEVC,QAAAA,SAAS,EAAE;AAFD;AALM,KAApB;AAUD;;AAxBwC","sourcesContent":["//\n// A pass that disables stencil test.\n//\n// Attribution: This class and the multipass system were inspired by\n// the THREE.js EffectComposer and *Pass classes\n\nimport ClipSpace from '../lib/clip-space';\nimport Pass from './pass';\n\nconst fs = `\\\nuniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n`;\n\nexport default class CopyPass extends Pass {\n  constructor(gl, props = {}) {\n    super(gl, Object.assign({id: 'copy-pass', swap: true}, props));\n    this.clipspace = new ClipSpace(gl, {id: 'copy-pass', fs});\n  }\n\n  delete() {\n    super.delete();\n    this.clipspace.delete();\n  }\n\n  _renderPass({inputBuffer}) {\n    const {opacity = 1.0} = this.props;\n\n    this.clipspace.draw({\n      uniforms: {\n        uDiffuseSampler: inputBuffer,\n        uOpacity: opacity\n      },\n      parameters: {\n        depthWrite: false,\n        depthTest: false\n      }\n    });\n  }\n}\n"],"file":"copy-pass.js"}