{"version":3,"sources":["../../../../src/modules/phong-lighting/phong-lighting.js"],"names":["lights","lightingShader","gouraudlighting","name","dependencies","vs","defines","LIGHTING_VERTEX","getUniforms","phonglighting","fs","LIGHTING_FRAGMENT","INITIAL_MODULE_OPTIONS","getMaterialUniforms","material","materialUniforms","lighting_uAmbient","ambient","lighting_uDiffuse","diffuse","lighting_uShininess","shininess","lighting_uSpecularColor","specularColor","map","x","opts","lighting_uEnabled"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,kBAAnB;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AAEA,IAAMC,eAAe,GAAG;AACtBC,EAAAA,IAAI,EAAE,kBADgB;AAEtBC,EAAAA,YAAY,EAAE,CAACJ,MAAD,CAFQ;AAGtBK,EAAAA,EAAE,EAAEJ,cAHkB;AAItBK,EAAAA,OAAO,EAAE;AACPC,IAAAA,eAAe,EAAE;AADV,GAJa;AAOtBC,EAAAA,WAAW,EAAXA;AAPsB,CAAxB;AAUA,IAAMC,aAAa,GAAG;AACpBN,EAAAA,IAAI,EAAE,gBADc;AAEpBC,EAAAA,YAAY,EAAE,CAACJ,MAAD,CAFM;AAGpBU,EAAAA,EAAE,EAAET,cAHgB;AAIpBK,EAAAA,OAAO,EAAE;AACPK,IAAAA,iBAAiB,EAAE;AADZ,GAJW;AAOpBH,EAAAA,WAAW,EAAXA;AAPoB,CAAtB;AAUA,IAAMI,sBAAsB,GAAG,EAA/B;;AAEA,SAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AACrC,MAAMC,gBAAgB,GAAG,EAAzB;AACAA,EAAAA,gBAAgB,CAACC,iBAAjB,GAAqCF,QAAQ,CAACG,OAA9C;AACAF,EAAAA,gBAAgB,CAACG,iBAAjB,GAAqCJ,QAAQ,CAACK,OAA9C;AACAJ,EAAAA,gBAAgB,CAACK,mBAAjB,GAAuCN,QAAQ,CAACO,SAAhD;AACAN,EAAAA,gBAAgB,CAACO,uBAAjB,GAA2CR,QAAQ,CAACS,aAAT,CAAuBC,GAAvB,CAA2B,UAAAC,CAAC;AAAA,WAAIA,CAAC,GAAG,GAAR;AAAA,GAA5B,CAA3C;AACA,SAAOV,gBAAP;AACD;;AAED,SAASP,WAAT,GAAoD;AAAA,MAA/BkB,IAA+B,uEAAxBd,sBAAwB;;AAClD,MAAI,EAAE,cAAcc,IAAhB,CAAJ,EAA2B;AACzB,WAAO,EAAP;AACD;;AAHiD,MAK3CZ,QAL2C,GAK/BY,IAL+B,CAK3CZ,QAL2C;;AAOlD,MAAI,CAACA,QAAL,EAAe;AACb,WAAO;AAACa,MAAAA,iBAAiB,EAAE;AAApB,KAAP;AACD;;AAED,SAAOd,mBAAmB,CAACC,QAAD,CAA1B;AACD;;AAED,SAAQZ,eAAR,EAAyBO,aAAzB","sourcesContent":["import lights from '../lights/lights';\nimport lightingShader from './phong-lighting.glsl';\n\nconst gouraudlighting = {\n  name: 'gouraud-lighting',\n  dependencies: [lights],\n  vs: lightingShader,\n  defines: {\n    LIGHTING_VERTEX: 1\n  },\n  getUniforms\n};\n\nconst phonglighting = {\n  name: 'phong-lighting',\n  dependencies: [lights],\n  fs: lightingShader,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  getUniforms\n};\n\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getMaterialUniforms(material) {\n  const materialUniforms = {};\n  materialUniforms.lighting_uAmbient = material.ambient;\n  materialUniforms.lighting_uDiffuse = material.diffuse;\n  materialUniforms.lighting_uShininess = material.shininess;\n  materialUniforms.lighting_uSpecularColor = material.specularColor.map(x => x / 255);\n  return materialUniforms;\n}\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (!('material' in opts)) {\n    return {};\n  }\n\n  const {material} = opts;\n\n  if (!material) {\n    return {lighting_uEnabled: false};\n  }\n\n  return getMaterialUniforms(material);\n}\n\nexport {gouraudlighting, phonglighting};\n"],"file":"phong-lighting.js"}