{"version":3,"sources":["../../../src/utils/old-log.js"],"names":["assert","cache","log","priority","arg","args","Number","isFinite","formatArgs","console","debug","info","once","checkForAssertionErrors","error","warn","deprecated","oldUsage","newUsage","removed","time","label","timeEnd","group","collapsed","groupCollapsed","groupEnd","firstArg","unshift","isAssertion","length","name","Array","prototype","slice","call","message"],"mappings":"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","sourcesContent":["// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// TODO / DEPRECATED - remove once probe.gl log integration is proving\n/* eslint-disable no-console */\n/* global console */\nimport assert from '../utils/assert';\n\nconst cache = {};\n\nfunction log(priority, arg, ...args) {\n  assert(Number.isFinite(priority), 'log priority must be a number');\n  if (priority <= log.priority) {\n    // Node doesn't have console.debug, but using it looks better in browser consoles\n    args = formatArgs(arg, ...args);\n    if (console.debug) {\n      console.debug(...args);\n    } else {\n      console.info(...args);\n    }\n  }\n}\n\nfunction once(priority, arg, ...args) {\n  if (!cache[arg] && priority <= log.priority) {\n    args = checkForAssertionErrors(args);\n    console.error(...formatArgs(arg, ...args));\n    cache[arg] = true;\n  }\n}\n\nfunction warn(arg, ...args) {\n  if (!cache[arg]) {\n    console.warn(`deck.gl: ${arg}`, ...args);\n    cache[arg] = true;\n  }\n}\n\nfunction error(arg, ...args) {\n  console.error(`deck.gl: ${arg}`, ...args);\n}\n\nfunction deprecated(oldUsage, newUsage) {\n  log.warn(`\\`${oldUsage}\\` is deprecated and will be removed \\\nin a later version. Use \\`${newUsage}\\` instead`);\n}\n\nfunction removed(oldUsage, newUsage) {\n  log.error(`\\`${oldUsage}\\` is no longer supported. Use \\`${newUsage}\\` instead,\\\n check our upgrade-guide.md for more details`);\n}\n\n// Logs a message with a time\nfunction time(priority, label) {\n  assert(Number.isFinite(priority), 'log priority must be a number');\n  if (priority <= log.priority) {\n    // In case the platform doesn't have console.time\n    if (console.time) {\n      console.time(label);\n    } else {\n      console.info(label);\n    }\n  }\n}\n\nfunction timeEnd(priority, label) {\n  assert(Number.isFinite(priority), 'log priority must be a number');\n  if (priority <= log.priority) {\n    // In case the platform doesn't have console.timeEnd\n    if (console.timeEnd) {\n      console.timeEnd(label);\n    } else {\n      console.info(label);\n    }\n  }\n}\n\nfunction group(priority, arg, {collapsed = false} = {}) {\n  if (priority <= log.priority) {\n    if (collapsed) {\n      console.groupCollapsed(`luma.gl: ${arg}`);\n    } else {\n      console.group(`luma.gl: ${arg}`);\n    }\n  }\n}\n\nfunction groupEnd(priority, arg) {\n  if (priority <= log.priority) {\n    console.groupEnd(`luma.gl: ${arg}`);\n  }\n}\n\n// Helper functions\n\nfunction formatArgs(firstArg, ...args) {\n  if (typeof firstArg === 'function') {\n    firstArg = firstArg();\n  }\n  if (typeof firstArg === 'string') {\n    args.unshift(`deck.gl ${firstArg}`);\n  } else {\n    args.unshift(firstArg);\n    args.unshift('deck.gl');\n  }\n  return args;\n}\n\n// Assertions don't generate standard exceptions and don't print nicely\nfunction checkForAssertionErrors(args) {\n  const isAssertion =\n    args &&\n    args.length > 0 &&\n    typeof args[0] === 'object' &&\n    args[0] !== null &&\n    args[0].name === 'AssertionError';\n\n  if (isAssertion) {\n    args = Array.prototype.slice.call(args);\n    args.unshift(`assert(${args[0].message})`);\n  }\n  return args;\n}\n\nlog.priority = 0;\nlog.log = log;\nlog.once = once;\nlog.time = time;\nlog.timeEnd = timeEnd;\nlog.warn = warn;\nlog.error = error;\nlog.deprecated = deprecated;\nlog.removed = removed;\nlog.group = group;\nlog.groupEnd = groupEnd;\n\nexport default log;\n"],"file":"old-log.js"}