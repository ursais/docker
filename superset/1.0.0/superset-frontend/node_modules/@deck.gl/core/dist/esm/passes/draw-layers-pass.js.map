{"version":3,"sources":["../../../src/passes/draw-layers-pass.js"],"names":["LayersPass","DrawLayersPass","layer","effects","effectProps","moduleParameters","Object","assign","getObjectHighlightParameters","effect","getParameters","props","highlightedObjectIndex","highlightColor","parameters","pickingHighlightColor","Number","isInteger","pickingSelectedColor","encodePickingColor"],"mappings":";;;;;;AAAA,OAAOA,UAAP,MAAuB,eAAvB;;IAEqBC,c;;;;;;;;;;;wCAECC,K,EAAOC,O,EAASC,W,EAAa;AAC/C,UAAMC,gBAAgB,2FAA6BH,KAA7B,CAAtB;;AACAI,MAAAA,MAAM,CAACC,MAAP,CAAcF,gBAAd,EAAgC,KAAKG,4BAAL,CAAkCN,KAAlC,CAAhC,EAA0EE,WAA1E;AAF+C;AAAA;AAAA;;AAAA;AAG/C,6BAAqBD,OAArB,8HAA8B;AAAA,cAAnBM,MAAmB;AAC5BH,UAAAA,MAAM,CAACC,MAAP,CAAcF,gBAAd,EAAgCI,MAAM,CAACC,aAAP,CAAqBR,KAArB,CAAhC;AACD;AAL8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAM/C,aAAOG,gBAAP;AACD;;;iDAM4BH,K,EAAO;AAAA,yBAGeA,KAAK,CAACS,KAHrB;AAAA,UAG3BC,sBAH2B,gBAG3BA,sBAH2B;AAAA,UAGHC,cAHG,gBAGHA,cAHG;AAIlC,UAAMC,UAAU,GAAG;AACjBC,QAAAA,qBAAqB,EAAE,CACrBF,cAAc,CAAC,CAAD,CADO,EAErBA,cAAc,CAAC,CAAD,CAFO,EAGrBA,cAAc,CAAC,CAAD,CAHO,EAIrBA,cAAc,CAAC,CAAD,CAAd,IAAqB,GAJA;AADN,OAAnB;;AAWA,UAAIG,MAAM,CAACC,SAAP,CAAiBL,sBAAjB,CAAJ,EAA8C;AAC5CE,QAAAA,UAAU,CAACI,oBAAX,GACEN,sBAAsB,IAAI,CAA1B,GAA8BV,KAAK,CAACiB,kBAAN,CAAyBP,sBAAzB,CAA9B,GAAiF,IADnF;AAED;;AACD,aAAOE,UAAP;AACD;;;;EAnCyCd,U;;SAAvBC,c","sourcesContent":["import LayersPass from './layers-pass';\n\nexport default class DrawLayersPass extends LayersPass {\n  // PRIVATE\n  getModuleParameters(layer, effects, effectProps) {\n    const moduleParameters = super.getModuleParameters(layer);\n    Object.assign(moduleParameters, this.getObjectHighlightParameters(layer), effectProps);\n    for (const effect of effects) {\n      Object.assign(moduleParameters, effect.getParameters(layer));\n    }\n    return moduleParameters;\n  }\n\n  /**\n   * Returns the picking color of currenlty selected object of the given 'layer'.\n   * @return {Array} - the picking color or null if layers selected object is invalid.\n   */\n  getObjectHighlightParameters(layer) {\n    // TODO - inefficient to update settings every render?\n    // TODO: Add warning if 'highlightedObjectIndex' is > numberOfInstances of the model.\n    const {highlightedObjectIndex, highlightColor} = layer.props;\n    const parameters = {\n      pickingHighlightColor: [\n        highlightColor[0],\n        highlightColor[1],\n        highlightColor[2],\n        highlightColor[3] || 255\n      ]\n    };\n\n    // Update picking module settings if highlightedObjectIndex is set.\n    // This will overwrite any settings from auto highlighting.\n    if (Number.isInteger(highlightedObjectIndex)) {\n      parameters.pickingSelectedColor =\n        highlightedObjectIndex >= 0 ? layer.encodePickingColor(highlightedObjectIndex) : null;\n    }\n    return parameters;\n  }\n}\n"],"file":"draw-layers-pass.js"}