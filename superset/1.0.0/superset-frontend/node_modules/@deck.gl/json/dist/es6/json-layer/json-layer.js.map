{"version":3,"sources":["../../../src/json-layer/json-layer.js"],"names":["CompositeLayer","getJSONLayers","defaultProps","fetch","dataString","JSON","parse","configuration","JSONLayer","initializeState","state","layers","updateState","props","oldProps","changeFlags","layersChanged","dataChanged","data","renderLayers","layerName"],"mappings":"AAAA,SAAQA,cAAR,QAA6B,eAA7B;AACA,SAAQC,aAAR,QAA4B,yBAA5B;AAEA,MAAMC,YAAY,GAAG;AAEnBC,EAAAA,KAAK,EAAEC,UAAU,IAAIC,IAAI,CAACC,KAAL,CAAWF,UAAX,CAFF;AAGnBG,EAAAA,aAAa,EAAE;AAHI,CAArB;AAMA,eAAe,MAAMC,SAAN,SAAwBR,cAAxB,CAAuC;AACpDS,EAAAA,eAAe,GAAG;AAChB,SAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE;AADG,KAAb;AAGD;;AAEDC,EAAAA,WAAW,OAAiC;AAAA,QAA/BC,KAA+B,QAA/BA,KAA+B;AAAA,QAAxBC,QAAwB,QAAxBA,QAAwB;AAAA,QAAdC,WAAc,QAAdA,WAAc;AAC1C,UAAMC,aAAa,GAAGD,WAAW,CAACE,WAAZ,IAA2BJ,KAAK,CAACN,aAAN,KAAwBO,QAAQ,CAACP,aAAlF;;AAEA,QAAIS,aAAJ,EAAmB;AACjB,WAAKN,KAAL,CAAWC,MAAX,GAAoBV,aAAa,CAACY,KAAK,CAACK,IAAP,EAAaL,KAAK,CAACN,aAAnB,CAAjC;AACD;AACF;;AAEDY,EAAAA,YAAY,GAAG;AACb,WAAO,KAAKT,KAAL,CAAWC,MAAlB;AACD;;AAjBmD;AAoBtDH,SAAS,CAACY,SAAV,GAAsB,WAAtB;AACAZ,SAAS,CAACN,YAAV,GAAyBA,YAAzB","sourcesContent":["import {CompositeLayer} from '@deck.gl/core';\nimport {getJSONLayers} from '../parsers/convert-json';\n\nconst defaultProps = {\n  // Optionally accept JSON strings by parsing them\n  fetch: dataString => JSON.parse(dataString),\n  configuration: []\n};\n\nexport default class JSONLayer extends CompositeLayer {\n  initializeState() {\n    this.state = {\n      layers: []\n    };\n  }\n\n  updateState({props, oldProps, changeFlags}) {\n    const layersChanged = changeFlags.dataChanged || props.configuration !== oldProps.configuration;\n\n    if (layersChanged) {\n      this.state.layers = getJSONLayers(props.data, props.configuration);\n    }\n  }\n\n  renderLayers() {\n    return this.state.layers;\n  }\n}\n\nJSONLayer.layerName = 'JSONLayer';\nJSONLayer.defaultProps = defaultProps;\n"],"file":"json-layer.js"}