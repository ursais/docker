{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _sortInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/sort\";import _sliceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/slice\";import _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";import _Object$entries from \"@babel/runtime-corejs3/core-js-stable/object/entries\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { t, styled } from '@superset-ui/core';\n\n\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport CopyToClipboard from '../../components/CopyToClipboard';\nimport { IconTooltip } from '../../components/IconTooltip';\nimport ColumnElement from './ColumnElement';\nimport ShowSQL from './ShowSQL';\nimport ModalTrigger from '../../components/ModalTrigger';\nimport Loading from '../../components/Loading';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  table: PropTypes.object,\n  actions: PropTypes.object };\n\n\nconst defaultProps = {\n  actions: {},\n  table: null };\n\n\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &: hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\n\nconst Fade = styled.div`\n  transition: all ${({ theme }) => theme.transitionTiming}s;\n  opacity: ${props => props.hovered ? 1 : 0};\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"1hs1mx1\", styles: \"padding-top:6px\" } : { name: \"14hmmm7-metadata\", styles: \"padding-top:6px;label:metadata;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9hcHAvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1RhYmxlRWxlbWVudC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNE9RIiwiZmlsZSI6Ii9hcHAvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1RhYmxlRWxlbWVudC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IENvbGxhcHNlIGZyb20gJ3NyYy9jb21wb25lbnRzL0NvbGxhcHNlJztcbmltcG9ydCBDYXJkIGZyb20gJ3NyYy9jb21wb25lbnRzL0NhcmQnO1xuaW1wb3J0IEJ1dHRvbkdyb3VwIGZyb20gJ3NyYy9jb21wb25lbnRzL0J1dHRvbkdyb3VwJztcbmltcG9ydCB7IHQsIHN0eWxlZCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1Rvb2x0aXAnO1xuaW1wb3J0IEljb25zIGZyb20gJ3NyYy9jb21wb25lbnRzL0ljb25zJztcbmltcG9ydCBDb3B5VG9DbGlwYm9hcmQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Db3B5VG9DbGlwYm9hcmQnO1xuaW1wb3J0IHsgSWNvblRvb2x0aXAgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0ljb25Ub29sdGlwJztcbmltcG9ydCBDb2x1bW5FbGVtZW50IGZyb20gJy4vQ29sdW1uRWxlbWVudCc7XG5pbXBvcnQgU2hvd1NRTCBmcm9tICcuL1Nob3dTUUwnO1xuaW1wb3J0IE1vZGFsVHJpZ2dlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL01vZGFsVHJpZ2dlcic7XG5pbXBvcnQgTG9hZGluZyBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xvYWRpbmcnO1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIHRhYmxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBhY3Rpb25zOiBQcm9wVHlwZXMub2JqZWN0LFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBhY3Rpb25zOiB7fSxcbiAgdGFibGU6IG51bGwsXG59O1xuXG5jb25zdCBTdHlsZWRTcGFuID0gc3R5bGVkLnNwYW5gXG4gIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5wcmltYXJ5LmRhcmsxfTtcbiAgJjogaG92ZXIge1xuICAgIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5wcmltYXJ5LmRhcmsyfTtcbiAgfVxuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuXG5jb25zdCBGYWRlID0gc3R5bGVkLmRpdmBcbiAgdHJhbnNpdGlvbjogYWxsICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHJhbnNpdGlvblRpbWluZ31zO1xuICBvcGFjaXR5OiAke3Byb3BzID0+IChwcm9wcy5ob3ZlcmVkID8gMSA6IDApfTtcbmA7XG5cbmNvbnN0IFRhYmxlRWxlbWVudCA9IHByb3BzID0+IHtcbiAgY29uc3QgW3NvcnRDb2x1bW5zLCBzZXRTb3J0Q29sdW1uc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtob3ZlcmVkLCBzZXRIb3ZlcmVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCB7IHRhYmxlLCBhY3Rpb25zLCBpc0FjdGl2ZSB9ID0gcHJvcHM7XG5cbiAgY29uc3Qgc2V0SG92ZXIgPSBob3ZlcmVkID0+IHtcbiAgICBkZWJvdW5jZSgoKSA9PiBzZXRIb3ZlcmVkKGhvdmVyZWQpLCAxMDApKCk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlVGFibGUgPSAoKSA9PiB7XG4gICAgYWN0aW9ucy5yZW1vdmVEYXRhUHJldmlldyh0YWJsZSk7XG4gICAgYWN0aW9ucy5yZW1vdmVUYWJsZSh0YWJsZSk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlU29ydENvbHVtbnMgPSAoKSA9PiB7XG4gICAgc2V0U29ydENvbHVtbnMocHJldlN0YXRlID0+ICFwcmV2U3RhdGUpO1xuICB9O1xuXG4gIGNvbnN0IHJlbmRlcldlbGwgPSAoKSA9PiB7XG4gICAgbGV0IGhlYWRlcjtcbiAgICBpZiAodGFibGUucGFydGl0aW9ucykge1xuICAgICAgbGV0IHBhcnRpdGlvblF1ZXJ5O1xuICAgICAgbGV0IHBhcnRpdGlvbkNsaXBCb2FyZDtcbiAgICAgIGlmICh0YWJsZS5wYXJ0aXRpb25zLnBhcnRpdGlvblF1ZXJ5KSB7XG4gICAgICAgICh7IHBhcnRpdGlvblF1ZXJ5IH0gPSB0YWJsZS5wYXJ0aXRpb25zKTtcbiAgICAgICAgY29uc3QgdHQgPSB0KCdDb3B5IHBhcnRpdGlvbiBxdWVyeSB0byBjbGlwYm9hcmQnKTtcbiAgICAgICAgcGFydGl0aW9uQ2xpcEJvYXJkID0gKFxuICAgICAgICAgIDxDb3B5VG9DbGlwYm9hcmRcbiAgICAgICAgICAgIHRleHQ9e3BhcnRpdGlvblF1ZXJ5fVxuICAgICAgICAgICAgc2hvdWxkU2hvd1RleHQ9e2ZhbHNlfVxuICAgICAgICAgICAgdG9vbHRpcFRleHQ9e3R0fVxuICAgICAgICAgICAgY29weU5vZGU9ezxpIGNsYXNzTmFtZT1cImZhIGZhLWNsaXBib2FyZFwiIC8+fVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBsZXQgbGF0ZXN0ID0gT2JqZWN0LmVudHJpZXModGFibGUucGFydGl0aW9ucz8ubGF0ZXN0IHx8IFtdKS5tYXAoXG4gICAgICAgIChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09JHt2YWx1ZX1gLFxuICAgICAgKTtcbiAgICAgIGxhdGVzdCA9IGxhdGVzdC5qb2luKCcvJyk7XG4gICAgICBoZWFkZXIgPSAoXG4gICAgICAgIDxDYXJkIHNpemU9XCJzbWFsbFwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8c21hbGw+XG4gICAgICAgICAgICAgIHt0KCdsYXRlc3QgcGFydGl0aW9uOicpfSB7bGF0ZXN0fVxuICAgICAgICAgICAgPC9zbWFsbD57JyAnfVxuICAgICAgICAgICAge3BhcnRpdGlvbkNsaXBCb2FyZH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGhlYWRlcjtcbiAgfTtcblxuICBjb25zdCByZW5kZXJDb250cm9scyA9ICgpID0+IHtcbiAgICBsZXQga2V5TGluaztcbiAgICBpZiAodGFibGU/LmluZGV4ZXM/Lmxlbmd0aCkge1xuICAgICAga2V5TGluayA9IChcbiAgICAgICAgPE1vZGFsVHJpZ2dlclxuICAgICAgICAgIG1vZGFsVGl0bGU9e1xuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAge3QoJ0tleXMgZm9yIHRhYmxlJyl9IDxzdHJvbmc+e3RhYmxlLm5hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kYWxCb2R5PXt0YWJsZS5pbmRleGVzLm1hcCgoaXgsIGkpID0+IChcbiAgICAgICAgICAgIDxwcmUga2V5PXtpfT57SlNPTi5zdHJpbmdpZnkoaXgsIG51bGwsICcgICcpfTwvcHJlPlxuICAgICAgICAgICkpfVxuICAgICAgICAgIHRyaWdnZXJOb2RlPXtcbiAgICAgICAgICAgIDxJY29uVG9vbHRpcFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmYSBmYS1rZXkgcHVsbC1sZWZ0IG0tbC0yXCJcbiAgICAgICAgICAgICAgdG9vbHRpcD17dCgnVmlldyBrZXlzICYgaW5kZXhlcyAoJXMpJywgdGFibGUuaW5kZXhlcy5sZW5ndGgpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPEJ1dHRvbkdyb3VwIGNsYXNzTmFtZT1cIndzLWVsLWNvbnRyb2xzXCI+XG4gICAgICAgIHtrZXlMaW5rfVxuICAgICAgICA8SWNvblRvb2x0aXBcbiAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgYGZhIGZhLXNvcnQtJHtzb3J0Q29sdW1ucyA/ICdudW1lcmljJyA6ICdhbHBoYSd9LWFzYyBgICtcbiAgICAgICAgICAgICdwdWxsLWxlZnQgc29ydC1jb2xzIG0tbC0yIHBvaW50ZXInXG4gICAgICAgICAgfVxuICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVNvcnRDb2x1bW5zfVxuICAgICAgICAgIHRvb2x0aXA9e1xuICAgICAgICAgICAgIXNvcnRDb2x1bW5zXG4gICAgICAgICAgICAgID8gdCgnU29ydCBjb2x1bW5zIGFscGhhYmV0aWNhbGx5JylcbiAgICAgICAgICAgICAgOiB0KCdPcmlnaW5hbCB0YWJsZSBjb2x1bW4gb3JkZXInKVxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICAge3RhYmxlLnNlbGVjdFN0YXIgJiYgKFxuICAgICAgICAgIDxDb3B5VG9DbGlwYm9hcmRcbiAgICAgICAgICAgIGNvcHlOb2RlPXtcbiAgICAgICAgICAgICAgPEljb25Ub29sdGlwXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkNvcHlcIlxuICAgICAgICAgICAgICAgIHRvb2x0aXA9e3QoJ0NvcHkgU0VMRUNUIHN0YXRlbWVudCB0byB0aGUgY2xpcGJvYXJkJyl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aSBhcmlhLWhpZGRlbiBjbGFzc05hbWU9XCJmYSBmYS1jbGlwYm9hcmQgcHVsbC1sZWZ0IG0tbC0yXCIgLz5cbiAgICAgICAgICAgICAgPC9JY29uVG9vbHRpcD5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHQ9e3RhYmxlLnNlbGVjdFN0YXJ9XG4gICAgICAgICAgICBzaG91bGRTaG93VGV4dD17ZmFsc2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge3RhYmxlLnZpZXcgJiYgKFxuICAgICAgICAgIDxTaG93U1FMXG4gICAgICAgICAgICBzcWw9e3RhYmxlLnZpZXd9XG4gICAgICAgICAgICB0b29sdGlwVGV4dD17dCgnU2hvdyBDUkVBVEUgVklFVyBzdGF0ZW1lbnQnKX1cbiAgICAgICAgICAgIHRpdGxlPXt0KCdDUkVBVEUgVklFVyBzdGF0ZW1lbnQnKX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8SWNvblRvb2x0aXBcbiAgICAgICAgICBjbGFzc05hbWU9XCJmYSBmYS10aW1lcyB0YWJsZS1yZW1vdmUgcHVsbC1sZWZ0IG0tbC0yIHBvaW50ZXJcIlxuICAgICAgICAgIG9uQ2xpY2s9e3JlbW92ZVRhYmxlfVxuICAgICAgICAgIHRvb2x0aXA9e3QoJ1JlbW92ZSB0YWJsZSBwcmV2aWV3Jyl9XG4gICAgICAgIC8+XG4gICAgICA8L0J1dHRvbkdyb3VwPlxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVySGVhZGVyID0gKCkgPT4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cImNsZWFyZml4IGhlYWRlci1jb250YWluZXJcIlxuICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiBzZXRIb3Zlcih0cnVlKX1cbiAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0SG92ZXIoZmFsc2UpfVxuICAgID5cbiAgICAgIDxUb29sdGlwXG4gICAgICAgIGlkPVwiY29weS10by1jbGlwYm9hcmQtdG9vbHRpcFwiXG4gICAgICAgIHBsYWNlbWVudD1cInRvcExlZnRcIlxuICAgICAgICBzdHlsZT17eyBjdXJzb3I6ICdwb2ludGVyJyB9fVxuICAgICAgICB0aXRsZT17dGFibGUubmFtZX1cbiAgICAgICAgdHJpZ2dlcj17Wydob3ZlciddfVxuICAgICAgPlxuICAgICAgICA8U3R5bGVkU3BhbiBkYXRhLXRlc3Q9XCJjb2xsYXBzZVwiIGNsYXNzTmFtZT1cInRhYmxlLW5hbWVcIj5cbiAgICAgICAgICA8c3Ryb25nPnt0YWJsZS5uYW1lfTwvc3Ryb25nPlxuICAgICAgICA8L1N0eWxlZFNwYW4+XG4gICAgICA8L1Rvb2x0aXA+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHVsbC1yaWdodCBoZWFkZXItcmlnaHQtc2lkZVwiPlxuICAgICAgICB7dGFibGUuaXNNZXRhZGF0YUxvYWRpbmcgfHwgdGFibGUuaXNFeHRyYU1ldGFkYXRhTG9hZGluZyA/IChcbiAgICAgICAgICA8TG9hZGluZyBwb3NpdGlvbj1cImlubGluZVwiIC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPEZhZGVcbiAgICAgICAgICAgIGRhdGEtdGVzdD1cImZhZGVcIlxuICAgICAgICAgICAgaG92ZXJlZD17aG92ZXJlZH1cbiAgICAgICAgICAgIG9uQ2xpY2s9e2UgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cmVuZGVyQ29udHJvbHMoKX1cbiAgICAgICAgICA8L0ZhZGU+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcblxuICBjb25zdCByZW5kZXJCb2R5ID0gKCkgPT4ge1xuICAgIGxldCBjb2xzO1xuICAgIGlmICh0YWJsZS5jb2x1bW5zKSB7XG4gICAgICBjb2xzID0gdGFibGUuY29sdW1ucy5zbGljZSgpO1xuICAgICAgaWYgKHNvcnRDb2x1bW5zKSB7XG4gICAgICAgIGNvbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbEEgPSBhLm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICBjb25zdCBjb2xCID0gYi5uYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgaWYgKGNvbEEgPCBjb2xCKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb2xBID4gY29sQikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtZXRhZGF0YSA9IChcbiAgICAgIDxkaXZcbiAgICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiBzZXRIb3Zlcih0cnVlKX1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiBzZXRIb3ZlcihmYWxzZSl9XG4gICAgICAgIGNzcz17eyBwYWRkaW5nVG9wOiA2IH19XG4gICAgICA+XG4gICAgICAgIHtyZW5kZXJXZWxsKCl9XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge2NvbHM/Lm1hcChjb2wgPT4gKFxuICAgICAgICAgICAgPENvbHVtbkVsZW1lbnQgY29sdW1uPXtjb2x9IGtleT17Y29sLm5hbWV9IC8+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgICByZXR1cm4gbWV0YWRhdGE7XG4gIH07XG5cbiAgY29uc3QgY29sbGFwc2VFeHBhbmRJY29uID0gKCkgPT4gKFxuICAgIDxJY29uVG9vbHRpcFxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgIHJpZ2h0OiAnMTZweCcsXG4gICAgICAgIGxlZnQ6ICdhdXRvJyxcbiAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKDkwZGVnKScsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICB9fVxuICAgICAgYXJpYS1sYWJlbD1cIkNvbGxhcHNlXCJcbiAgICAgIHRvb2x0aXA9e3QoYCR7aXNBY3RpdmUgPyAnQ29sbGFwc2UnIDogJ0V4cGFuZCd9IHRhYmxlIHByZXZpZXdgKX1cbiAgICA+XG4gICAgICA8SWNvbnMuUmlnaHRPdXRsaW5lZFxuICAgICAgICBpY29uU2l6ZT1cInNcIlxuICAgICAgICBzdHlsZT17aXNBY3RpdmUgPyB7IHRyYW5zZm9ybTogJ3JvdGF0ZVkoMTgwZGVnKScgfSA6IG51bGx9XG4gICAgICAvPlxuICAgIDwvSWNvblRvb2x0aXA+XG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q29sbGFwc2UuUGFuZWxcbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIGhlYWRlcj17cmVuZGVySGVhZGVyKCl9XG4gICAgICBjbGFzc05hbWU9XCJUYWJsZUVsZW1lbnRcIlxuICAgICAgZm9yY2VSZW5kZXJcbiAgICAgIGV4cGFuZEljb249e2NvbGxhcHNlRXhwYW5kSWNvbn1cbiAgICA+XG4gICAgICB7cmVuZGVyQm9keSgpfVxuICAgIDwvQ29sbGFwc2UuUGFuZWw+XG4gICk7XG59O1xuXG5UYWJsZUVsZW1lbnQucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuVGFibGVFbGVtZW50LmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuZXhwb3J0IGRlZmF1bHQgVGFibGVFbGVtZW50O1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\nconst TableElement = props => {\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n\n  const { table, actions, isActive } = props;\n\n  const setHover = hovered => {\n    _debounce(() => setHovered(hovered), 100)();\n  };\n\n  const removeTable = () => {\n    actions.removeDataPreview(table);\n    actions.removeTable(table);\n  };\n\n  const toggleSortColumns = () => {\n    setSortColumns(prevState => !prevState);\n  };\n\n  const renderWell = () => {\n    let header;\n    if (table.partitions) {var _context, _table$partitions;\n      let partitionQuery;\n      let partitionClipBoard;\n      if (table.partitions.partitionQuery) {\n        ({ partitionQuery } = table.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard =\n        ___EmotionJSX(CopyToClipboard, {\n          text: partitionQuery,\n          shouldShowText: false,\n          tooltipText: tt,\n          copyNode: ___EmotionJSX(\"i\", { className: \"fa fa-clipboard\" }) });\n\n\n      }\n      let latest = _mapInstanceProperty(_context = _Object$entries(((_table$partitions = table.partitions) == null ? void 0 : _table$partitions.latest) || [])).call(_context,\n      ([key, value]) => `${key}=${value}`);\n\n      latest = latest.join('/');\n      header =\n      ___EmotionJSX(Card, { size: \"small\" },\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(\"small\", null,\n      t('latest partition:'), \" \", latest),\n      ' ',\n      partitionClipBoard));\n\n\n\n    }\n    return header;\n  };\n\n  const renderControls = () => {var _table$indexes;\n    let keyLink;\n    if (table != null && (_table$indexes = table.indexes) != null && _table$indexes.length) {var _context2;\n      keyLink =\n      ___EmotionJSX(ModalTrigger, {\n        modalTitle:\n        ___EmotionJSX(\"div\", null,\n        t('Keys for table'), \" \", ___EmotionJSX(\"strong\", null, table.name)),\n\n\n        modalBody: _mapInstanceProperty(_context2 = table.indexes).call(_context2, (ix, i) =>\n        ___EmotionJSX(\"pre\", { key: i }, _JSON$stringify(ix, null, '  '))),\n\n        triggerNode:\n        ___EmotionJSX(IconTooltip, {\n          className: \"fa fa-key pull-left m-l-2\",\n          tooltip: t('View keys & indexes (%s)', table.indexes.length) }) });\n\n\n\n\n    }\n    return (\n      ___EmotionJSX(ButtonGroup, { className: \"ws-el-controls\" },\n      keyLink,\n      ___EmotionJSX(IconTooltip, {\n        className:\n        `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n        'pull-left sort-cols m-l-2 pointer',\n\n        onClick: toggleSortColumns,\n        tooltip:\n        !sortColumns ?\n        t('Sort columns alphabetically') :\n        t('Original table column order') }),\n\n\n      table.selectStar &&\n      ___EmotionJSX(CopyToClipboard, {\n        copyNode:\n        ___EmotionJSX(IconTooltip, {\n          \"aria-label\": \"Copy\",\n          tooltip: t('Copy SELECT statement to the clipboard') },\n\n        ___EmotionJSX(\"i\", { \"aria-hidden\": true, className: \"fa fa-clipboard pull-left m-l-2\" })),\n\n\n        text: table.selectStar,\n        shouldShowText: false }),\n\n\n      table.view &&\n      ___EmotionJSX(ShowSQL, {\n        sql: table.view,\n        tooltipText: t('Show CREATE VIEW statement'),\n        title: t('CREATE VIEW statement') }),\n\n\n      ___EmotionJSX(IconTooltip, {\n        className: \"fa fa-times table-remove pull-left m-l-2 pointer\",\n        onClick: removeTable,\n        tooltip: t('Remove table preview') })));\n\n\n\n  };\n\n  const renderHeader = () =>\n  ___EmotionJSX(\"div\", {\n    className: \"clearfix header-container\",\n    onMouseEnter: () => setHover(true),\n    onMouseLeave: () => setHover(false) },\n\n  ___EmotionJSX(Tooltip, {\n    id: \"copy-to-clipboard-tooltip\",\n    placement: \"topLeft\",\n    style: { cursor: 'pointer' },\n    title: table.name,\n    trigger: ['hover'] },\n\n  ___EmotionJSX(StyledSpan, { \"data-test\": \"collapse\", className: \"table-name\" },\n  ___EmotionJSX(\"strong\", null, table.name))),\n\n\n\n  ___EmotionJSX(\"div\", { className: \"pull-right header-right-side\" },\n  table.isMetadataLoading || table.isExtraMetadataLoading ?\n  ___EmotionJSX(Loading, { position: \"inline\" }) :\n\n  ___EmotionJSX(Fade, {\n    \"data-test\": \"fade\",\n    hovered: hovered,\n    onClick: e => e.stopPropagation() },\n\n  renderControls())));\n\n\n\n\n\n\n  const renderBody = () => {var _cols;\n    let cols;\n    if (table.columns) {var _context3;\n      cols = _sliceInstanceProperty(_context3 = table.columns).call(_context3);\n      if (sortColumns) {\n        _sortInstanceProperty(cols).call(cols, (a, b) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          if (colA < colB) {\n            return -1;\n          }\n          if (colA > colB) {\n            return 1;\n          }\n          return 0;\n        });\n      }\n    }\n\n    const metadata =\n    ___EmotionJSX(\"div\", {\n      onMouseEnter: () => setHover(true),\n      onMouseLeave: () => setHover(false),\n      css: _ref },\n\n    renderWell(),\n    ___EmotionJSX(\"div\", null, (_cols =\n    cols) == null ? void 0 : _mapInstanceProperty(_cols).call(_cols, (col) =>\n    ___EmotionJSX(ColumnElement, { column: col, key: col.name }))));\n\n\n\n\n    return metadata;\n  };\n\n  const collapseExpandIcon = () =>\n  ___EmotionJSX(IconTooltip, {\n    style: {\n      position: 'fixed',\n      right: '16px',\n      left: 'auto',\n      fontSize: '12px',\n      transform: 'rotate(90deg)',\n      display: 'flex',\n      alignItems: 'center' },\n\n    \"aria-label\": \"Collapse\",\n    tooltip: t(`${isActive ? 'Collapse' : 'Expand'} table preview`) },\n\n  ___EmotionJSX(Icons.RightOutlined, {\n    iconSize: \"s\",\n    style: isActive ? { transform: 'rotateY(180deg)' } : null }));\n\n\n\n\n  return (\n    ___EmotionJSX(Collapse.Panel, _extends({},\n    props, {\n      header: renderHeader(),\n      className: \"TableElement\",\n      forceRender: true,\n      expandIcon: collapseExpandIcon }),\n\n    renderBody()));\n\n\n};__signature__(TableElement, \"useState{[sortColumns, setSortColumns](false)}\\nuseState{[hovered, setHovered](false)}\");\n\nTableElement.propTypes = propTypes;\nTableElement.defaultProps = defaultProps;const _default =\n\nTableElement;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(StyledSpan, \"StyledSpan\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(Fade, \"Fade\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(TableElement, \"TableElement\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/SqlLab/components/TableElement.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/SqlLab/components/TableElement.jsx"],"names":["React","useState","PropTypes","Collapse","Card","ButtonGroup","t","styled","Tooltip","Icons","CopyToClipboard","IconTooltip","ColumnElement","ShowSQL","ModalTrigger","Loading","propTypes","table","object","actions","defaultProps","StyledSpan","span","theme","colors","primary","dark1","dark2","Fade","div","transitionTiming","props","hovered","TableElement","sortColumns","setSortColumns","setHovered","isActive","setHover","removeTable","removeDataPreview","toggleSortColumns","prevState","renderWell","header","partitions","partitionQuery","partitionClipBoard","tt","latest","key","value","join","renderControls","keyLink","indexes","length","name","ix","i","selectStar","view","renderHeader","cursor","isMetadataLoading","isExtraMetadataLoading","e","stopPropagation","renderBody","cols","columns","a","b","colA","toUpperCase","colB","metadata","col","collapseExpandIcon","position","right","left","fontSize","transform","display","alignItems"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { t, styled } from '@superset-ui/core';\nimport { debounce } from 'lodash';\n\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport CopyToClipboard from '../../components/CopyToClipboard';\nimport { IconTooltip } from '../../components/IconTooltip';\nimport ColumnElement from './ColumnElement';\nimport ShowSQL from './ShowSQL';\nimport ModalTrigger from '../../components/ModalTrigger';\nimport Loading from '../../components/Loading';\n\nconst propTypes = {\n  table: PropTypes.object,\n  actions: PropTypes.object,\n};\n\nconst defaultProps = {\n  actions: {},\n  table: null,\n};\n\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &: hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\n\nconst Fade = styled.div`\n  transition: all ${({ theme }) => theme.transitionTiming}s;\n  opacity: ${props => (props.hovered ? 1 : 0)};\n`;\n\nconst TableElement = props => {\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n\n  const { table, actions, isActive } = props;\n\n  const setHover = hovered => {\n    debounce(() => setHovered(hovered), 100)();\n  };\n\n  const removeTable = () => {\n    actions.removeDataPreview(table);\n    actions.removeTable(table);\n  };\n\n  const toggleSortColumns = () => {\n    setSortColumns(prevState => !prevState);\n  };\n\n  const renderWell = () => {\n    let header;\n    if (table.partitions) {\n      let partitionQuery;\n      let partitionClipBoard;\n      if (table.partitions.partitionQuery) {\n        ({ partitionQuery } = table.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = (\n          <CopyToClipboard\n            text={partitionQuery}\n            shouldShowText={false}\n            tooltipText={tt}\n            copyNode={<i className=\"fa fa-clipboard\" />}\n          />\n        );\n      }\n      let latest = Object.entries(table.partitions?.latest || []).map(\n        ([key, value]) => `${key}=${value}`,\n      );\n      latest = latest.join('/');\n      header = (\n        <Card size=\"small\">\n          <div>\n            <small>\n              {t('latest partition:')} {latest}\n            </small>{' '}\n            {partitionClipBoard}\n          </div>\n        </Card>\n      );\n    }\n    return header;\n  };\n\n  const renderControls = () => {\n    let keyLink;\n    if (table?.indexes?.length) {\n      keyLink = (\n        <ModalTrigger\n          modalTitle={\n            <div>\n              {t('Keys for table')} <strong>{table.name}</strong>\n            </div>\n          }\n          modalBody={table.indexes.map((ix, i) => (\n            <pre key={i}>{JSON.stringify(ix, null, '  ')}</pre>\n          ))}\n          triggerNode={\n            <IconTooltip\n              className=\"fa fa-key pull-left m-l-2\"\n              tooltip={t('View keys & indexes (%s)', table.indexes.length)}\n            />\n          }\n        />\n      );\n    }\n    return (\n      <ButtonGroup className=\"ws-el-controls\">\n        {keyLink}\n        <IconTooltip\n          className={\n            `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n            'pull-left sort-cols m-l-2 pointer'\n          }\n          onClick={toggleSortColumns}\n          tooltip={\n            !sortColumns\n              ? t('Sort columns alphabetically')\n              : t('Original table column order')\n          }\n        />\n        {table.selectStar && (\n          <CopyToClipboard\n            copyNode={\n              <IconTooltip\n                aria-label=\"Copy\"\n                tooltip={t('Copy SELECT statement to the clipboard')}\n              >\n                <i aria-hidden className=\"fa fa-clipboard pull-left m-l-2\" />\n              </IconTooltip>\n            }\n            text={table.selectStar}\n            shouldShowText={false}\n          />\n        )}\n        {table.view && (\n          <ShowSQL\n            sql={table.view}\n            tooltipText={t('Show CREATE VIEW statement')}\n            title={t('CREATE VIEW statement')}\n          />\n        )}\n        <IconTooltip\n          className=\"fa fa-times table-remove pull-left m-l-2 pointer\"\n          onClick={removeTable}\n          tooltip={t('Remove table preview')}\n        />\n      </ButtonGroup>\n    );\n  };\n\n  const renderHeader = () => (\n    <div\n      className=\"clearfix header-container\"\n      onMouseEnter={() => setHover(true)}\n      onMouseLeave={() => setHover(false)}\n    >\n      <Tooltip\n        id=\"copy-to-clipboard-tooltip\"\n        placement=\"topLeft\"\n        style={{ cursor: 'pointer' }}\n        title={table.name}\n        trigger={['hover']}\n      >\n        <StyledSpan data-test=\"collapse\" className=\"table-name\">\n          <strong>{table.name}</strong>\n        </StyledSpan>\n      </Tooltip>\n\n      <div className=\"pull-right header-right-side\">\n        {table.isMetadataLoading || table.isExtraMetadataLoading ? (\n          <Loading position=\"inline\" />\n        ) : (\n          <Fade\n            data-test=\"fade\"\n            hovered={hovered}\n            onClick={e => e.stopPropagation()}\n          >\n            {renderControls()}\n          </Fade>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderBody = () => {\n    let cols;\n    if (table.columns) {\n      cols = table.columns.slice();\n      if (sortColumns) {\n        cols.sort((a, b) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          if (colA < colB) {\n            return -1;\n          }\n          if (colA > colB) {\n            return 1;\n          }\n          return 0;\n        });\n      }\n    }\n\n    const metadata = (\n      <div\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        css={{ paddingTop: 6 }}\n      >\n        {renderWell()}\n        <div>\n          {cols?.map(col => (\n            <ColumnElement column={col} key={col.name} />\n          ))}\n        </div>\n      </div>\n    );\n    return metadata;\n  };\n\n  const collapseExpandIcon = () => (\n    <IconTooltip\n      style={{\n        position: 'fixed',\n        right: '16px',\n        left: 'auto',\n        fontSize: '12px',\n        transform: 'rotate(90deg)',\n        display: 'flex',\n        alignItems: 'center',\n      }}\n      aria-label=\"Collapse\"\n      tooltip={t(`${isActive ? 'Collapse' : 'Expand'} table preview`)}\n    >\n      <Icons.RightOutlined\n        iconSize=\"s\"\n        style={isActive ? { transform: 'rotateY(180deg)' } : null}\n      />\n    </IconTooltip>\n  );\n\n  return (\n    <Collapse.Panel\n      {...props}\n      header={renderHeader()}\n      className=\"TableElement\"\n      forceRender\n      expandIcon={collapseExpandIcon}\n    >\n      {renderBody()}\n    </Collapse.Panel>\n  );\n};\n\nTableElement.propTypes = propTypes;\nTableElement.defaultProps = defaultProps;\n\nexport default TableElement;\n"]},"metadata":{},"sourceType":"module"}