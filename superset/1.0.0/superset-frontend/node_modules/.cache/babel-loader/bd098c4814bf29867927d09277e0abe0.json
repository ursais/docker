{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _setInterval from \"@babel/runtime-corejs3/core-js-stable/set-interval\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport moment from 'moment';\nimport { t, styled } from '@superset-ui/core';\nimport Icon from 'src/components/Icon';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst REFRESH_INTERVAL = 60000; // every minute\nmoment.updateLocale('en', {\n  calendar: {\n    lastDay: '[Yesterday at] LTS',\n    sameDay: '[Today at] LTS',\n    nextDay: '[Tomorrow at] LTS',\n    lastWeek: '[last] dddd [at] LTS',\n    nextWeek: 'dddd [at] LTS',\n    sameElse: 'L' } });\n\n\nconst TextStyles = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\nconst Refresh = styled(Icon)`\n  color: ${({ theme }) => theme.colors.primary.base};\n  width: auto;\n  height: ${({ theme }) => theme.gridUnit * 5}px;\n  position: relative;\n  top: ${({ theme }) => theme.gridUnit}px;\n  left: ${({ theme }) => theme.gridUnit}px;\n  cursor: pointer;\n`;\nexport const LastUpdated = ({ updatedAt, update }) => {\n  const [timeSince, setTimeSince] = useState(moment(updatedAt));\n  useEffect(() => {\n    setTimeSince(() => moment(updatedAt));\n    // update UI every minute in case day changes\n    const interval = _setInterval(() => {\n      setTimeSince(() => moment(updatedAt));\n    }, REFRESH_INTERVAL);\n    return () => clearInterval(interval);\n  }, [updatedAt]);\n  return ___EmotionJSX(TextStyles, null,\n  t('Last Updated %s', timeSince.isValid() ? timeSince.calendar() : '--'),\n  update && ___EmotionJSX(Refresh, { name: \"refresh\", onClick: update }));\n\n};__signature__(LastUpdated, \"useState{[timeSince, setTimeSince](moment(updatedAt))}\\nuseEffect{}\");const _default =\nLastUpdated;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(REFRESH_INTERVAL, \"REFRESH_INTERVAL\", \"/app/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(TextStyles, \"TextStyles\", \"/app/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(Refresh, \"Refresh\", \"/app/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(LastUpdated, \"LastUpdated\", \"/app/superset-frontend/src/components/LastUpdated/index.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/components/LastUpdated/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/components/LastUpdated/index.tsx"],"names":[],"mappings":"+aAAA;;;;;;;;;;;;;;;;;AAiBG;AACH,OAAO,KAAP,IAAgB,SAAhB,EAA2B,QAA3B,QAA8D,OAA9D;AACA,OAAO,MAAP,MAA4C,QAA5C;AACA,SAAS,CAAT,EAAY,MAAZ,QAA0B,mBAA1B;AACA,OAAO,IAAP,MAAiB,qBAAjB,C;AAEA,MAAM,gBAAgB,GAAG,KAAzB,C,CAAgC;AAMhC,MAAM,CAAC,YAAP,CAAoB,IAApB,EAA0B;AACxB,EAAA,QAAQ,EAAE;AACR,IAAA,OAAO,EAAE,oBADD;AAER,IAAA,OAAO,EAAE,gBAFD;AAGR,IAAA,OAAO,EAAE,mBAHD;AAIR,IAAA,QAAQ,EAAE,sBAJF;AAKR,IAAA,QAAQ,EAAE,eALF;AAMR,IAAA,QAAQ,EAAE,GANF,EADc,EAA1B;;;AAWA,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI;WACnB,CAAC,EAAE,KAAF,EAAD,KAAe,KAAK,CAAC,MAAN,CAAa,SAAb,CAAuB,IAAI;AACpD,CAFD;AAIA,MAAM,OAAO,GAAG,MAAM,CAAC,IAAD,CAAM;WACjB,CAAC,EAAE,KAAF,EAAD,KAAe,KAAK,CAAC,MAAN,CAAa,OAAb,CAAqB,IAAI;;YAEvC,CAAC,EAAE,KAAF,EAAD,KAAe,KAAK,CAAC,QAAN,GAAiB,CAAC;;SAEpC,CAAC,EAAE,KAAF,EAAD,KAAe,KAAK,CAAC,QAAQ;UAC5B,CAAC,EAAE,KAAF,EAAD,KAAe,KAAK,CAAC,QAAQ;;AAEtC,CARD;AAUA,OAAO,MAAM,WAAW,GAAwC,CAAC,EAC/D,SAD+D,EAE/D,MAF+D,EAAD,KAG3D;AACH,QAAM,CAAC,SAAD,EAAY,YAAZ,IAA4B,QAAQ,CAAS,MAAM,CAAC,SAAD,CAAf,CAA1C;AAEA,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,YAAY,CAAC,MAAM,MAAM,CAAC,SAAD,CAAb,CAAZ;AAEA;AACA,UAAM,QAAQ,GAAG,aAAY,MAAK;AAChC,MAAA,YAAY,CAAC,MAAM,MAAM,CAAC,SAAD,CAAb,CAAZ;AACD,KAFgB,EAEd,gBAFc,CAAjB;AAIA,WAAO,MAAM,aAAa,CAAC,QAAD,CAA1B;AACD,GATQ,EASN,CAAC,SAAD,CATM,CAAT;AAWA,SACE,cAAC,UAAD;AACG,EAAA,CAAC,CAAC,iBAAD,EAAoB,SAAS,CAAC,OAAV,KAAsB,SAAS,CAAC,QAAV,EAAtB,GAA6C,IAAjE,CADJ;AAEG,EAAA,MAAM,IAAI,cAAC,OAAD,IAAS,IAAI,EAAC,SAAd,EAAwB,OAAO,EAAE,MAAjC,GAFb,CADF;;AAMD,CAvBM,C,cAAM,W;AAyBE,W,CAAf,wB,iLAxDM,gB,6GAiBA,U,uGAIA,O,oGAUO,W","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState, FunctionComponent } from 'react';\nimport moment, { Moment, MomentInput } from 'moment';\nimport { t, styled } from '@superset-ui/core';\nimport Icon from 'src/components/Icon';\n\nconst REFRESH_INTERVAL = 60000; // every minute\n\ninterface LastUpdatedProps {\n  updatedAt: MomentInput;\n  update?: React.MouseEventHandler<SVGSVGElement>;\n}\nmoment.updateLocale('en', {\n  calendar: {\n    lastDay: '[Yesterday at] LTS',\n    sameDay: '[Today at] LTS',\n    nextDay: '[Tomorrow at] LTS',\n    lastWeek: '[last] dddd [at] LTS',\n    nextWeek: 'dddd [at] LTS',\n    sameElse: 'L',\n  },\n});\n\nconst TextStyles = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst Refresh = styled(Icon)`\n  color: ${({ theme }) => theme.colors.primary.base};\n  width: auto;\n  height: ${({ theme }) => theme.gridUnit * 5}px;\n  position: relative;\n  top: ${({ theme }) => theme.gridUnit}px;\n  left: ${({ theme }) => theme.gridUnit}px;\n  cursor: pointer;\n`;\n\nexport const LastUpdated: FunctionComponent<LastUpdatedProps> = ({\n  updatedAt,\n  update,\n}) => {\n  const [timeSince, setTimeSince] = useState<Moment>(moment(updatedAt));\n\n  useEffect(() => {\n    setTimeSince(() => moment(updatedAt));\n\n    // update UI every minute in case day changes\n    const interval = setInterval(() => {\n      setTimeSince(() => moment(updatedAt));\n    }, REFRESH_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, [updatedAt]);\n\n  return (\n    <TextStyles>\n      {t('Last Updated %s', timeSince.isValid() ? timeSince.calendar() : '--')}\n      {update && <Refresh name=\"refresh\" onClick={update} />}\n    </TextStyles>\n  );\n};\n\nexport default LastUpdated;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}