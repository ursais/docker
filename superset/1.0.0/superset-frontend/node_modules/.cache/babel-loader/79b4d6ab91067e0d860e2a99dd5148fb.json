{"ast":null,"code":"import _parseFloat from \"@babel/runtime-corejs3/core-js-stable/parse-float\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";import _Number$isNaN from \"@babel/runtime-corejs3/core-js-stable/number/is-nan\";import _debounce from \"lodash/debounce\";import _isEqual from \"lodash/isEqual\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { InputNumber } from 'src/common/components';\nimport { t, styled } from '@superset-ui/core';\n\nimport ControlHeader from 'src/explore/components/ControlHeader';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.array };\n\n\nconst defaultProps = {\n  onChange: () => {},\n  value: [null, null] };\n\n\nconst StyledDiv = styled.div`\n  display: flex;\n`;\n\nconst MinInput = styled(InputNumber)`\n  flex: 1;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst MaxInput = styled(InputNumber)`\n  flex: 1;\n  margin-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nexport default class BoundsControl extends React.Component {\n  constructor(props) {var _context, _context2, _context3, _context4;\n    super(props);\n    this.state = {\n      minMax: [\n      _Number$isNaN(this.props.value[0]) ? '' : props.value[0],\n      _Number$isNaN(this.props.value[1]) ? '' : props.value[1]] };\n\n\n    this.onChange = _debounce(_bindInstanceProperty(_context = this.onChange).call(_context, this), 300);\n    this.onMinChange = _bindInstanceProperty(_context2 = this.onMinChange).call(_context2, this);\n    this.onMaxChange = _bindInstanceProperty(_context3 = this.onMaxChange).call(_context3, this);\n    this.update = _bindInstanceProperty(_context4 = this.update).call(_context4, this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!_isEqual(prevProps.value, this.props.value)) {\n      this.update();\n    }\n  }\n\n  update() {\n    this.setState({\n      minMax: [\n      _Number$isNaN(this.props.value[0]) ? '' : this.props.value[0],\n      _Number$isNaN(this.props.value[1]) ? '' : this.props.value[1]] });\n\n\n  }\n\n  onMinChange(value) {\n    this.setState(\n    prevState => ({\n      minMax: [value, prevState.minMax[1]] }),\n\n    this.onChange);\n\n  }\n\n  onMaxChange(value) {\n    this.setState(\n    prevState => ({\n      minMax: [prevState.minMax[0], value] }),\n\n    this.onChange);\n\n  }\n\n  onChange() {\n    const mm = this.state.minMax;\n    const min = _Number$isNaN(_parseFloat(mm[0])) ? null : _parseFloat(mm[0]);\n    const max = _Number$isNaN(_parseFloat(mm[1])) ? null : _parseFloat(mm[1]);\n    this.props.onChange([min, max]);\n  }\n\n  render() {\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(ControlHeader, this.props),\n      ___EmotionJSX(StyledDiv, null,\n      ___EmotionJSX(MinInput, {\n        \"data-test\": \"min-bound\",\n        placeholder: t('Min'),\n        onChange: this.onMinChange,\n        value: this.state.minMax[0] }),\n\n      ___EmotionJSX(MaxInput, {\n        \"data-test\": \"max-bound\",\n        placeholder: t('Max'),\n        onChange: this.onMaxChange,\n        value: this.state.minMax[1] }))));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nBoundsControl.propTypes = propTypes;\nBoundsControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/explore/components/controls/BoundsControl.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/explore/components/controls/BoundsControl.jsx\");reactHotLoader.register(StyledDiv, \"StyledDiv\", \"/app/superset-frontend/src/explore/components/controls/BoundsControl.jsx\");reactHotLoader.register(MinInput, \"MinInput\", \"/app/superset-frontend/src/explore/components/controls/BoundsControl.jsx\");reactHotLoader.register(MaxInput, \"MaxInput\", \"/app/superset-frontend/src/explore/components/controls/BoundsControl.jsx\");reactHotLoader.register(BoundsControl, \"BoundsControl\", \"/app/superset-frontend/src/explore/components/controls/BoundsControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/explore/components/controls/BoundsControl.jsx"],"names":["React","PropTypes","InputNumber","t","styled","ControlHeader","propTypes","onChange","func","value","array","defaultProps","StyledDiv","div","MinInput","theme","gridUnit","MaxInput","BoundsControl","Component","constructor","props","state","minMax","onMinChange","onMaxChange","update","componentDidUpdate","prevProps","setState","prevState","mm","min","max","render"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { InputNumber } from 'src/common/components';\nimport { t, styled } from '@superset-ui/core';\nimport { isEqual, debounce } from 'lodash';\nimport ControlHeader from 'src/explore/components/ControlHeader';\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.array,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  value: [null, null],\n};\n\nconst StyledDiv = styled.div`\n  display: flex;\n`;\n\nconst MinInput = styled(InputNumber)`\n  flex: 1;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst MaxInput = styled(InputNumber)`\n  flex: 1;\n  margin-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nexport default class BoundsControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      minMax: [\n        Number.isNaN(this.props.value[0]) ? '' : props.value[0],\n        Number.isNaN(this.props.value[1]) ? '' : props.value[1],\n      ],\n    };\n    this.onChange = debounce(this.onChange.bind(this), 300);\n    this.onMinChange = this.onMinChange.bind(this);\n    this.onMaxChange = this.onMaxChange.bind(this);\n    this.update = this.update.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!isEqual(prevProps.value, this.props.value)) {\n      this.update();\n    }\n  }\n\n  update() {\n    this.setState({\n      minMax: [\n        Number.isNaN(this.props.value[0]) ? '' : this.props.value[0],\n        Number.isNaN(this.props.value[1]) ? '' : this.props.value[1],\n      ],\n    });\n  }\n\n  onMinChange(value) {\n    this.setState(\n      prevState => ({\n        minMax: [value, prevState.minMax[1]],\n      }),\n      this.onChange,\n    );\n  }\n\n  onMaxChange(value) {\n    this.setState(\n      prevState => ({\n        minMax: [prevState.minMax[0], value],\n      }),\n      this.onChange,\n    );\n  }\n\n  onChange() {\n    const mm = this.state.minMax;\n    const min = Number.isNaN(parseFloat(mm[0])) ? null : parseFloat(mm[0]);\n    const max = Number.isNaN(parseFloat(mm[1])) ? null : parseFloat(mm[1]);\n    this.props.onChange([min, max]);\n  }\n\n  render() {\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <StyledDiv>\n          <MinInput\n            data-test=\"min-bound\"\n            placeholder={t('Min')}\n            onChange={this.onMinChange}\n            value={this.state.minMax[0]}\n          />\n          <MaxInput\n            data-test=\"max-bound\"\n            placeholder={t('Max')}\n            onChange={this.onMaxChange}\n            value={this.state.minMax[1]}\n          />\n        </StyledDiv>\n      </div>\n    );\n  }\n}\n\nBoundsControl.propTypes = propTypes;\nBoundsControl.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}