{"ast":null,"code":"import _setTimeout from \"@babel/runtime-corejs3/core-js-stable/set-timeout\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\n\nimport URLShortLinkButton from 'src/components/URLShortLinkButton';\nimport getDashboardUrl from 'src/dashboard/util/getDashboardUrl';\nimport getLocationHash from 'src/dashboard/util/getLocationHash';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  anchorLinkId: PropTypes.string.isRequired,\n  filters: PropTypes.object,\n  showShortLinkButton: PropTypes.bool,\n  inFocus: PropTypes.bool,\n  placement: PropTypes.oneOf(['right', 'left', 'top', 'bottom']) };\n\n\nconst defaultProps = {\n  inFocus: false,\n  showShortLinkButton: false,\n  placement: 'right',\n  filters: {} };\n\n\nclass AnchorLink extends React.PureComponent {\n  componentDidMount() {\n    const hash = getLocationHash();\n    const { anchorLinkId } = this.props;\n\n    if (hash && anchorLinkId === hash) {\n      this.scrollToView();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { inFocus = false } = nextProps;\n    if (inFocus) {\n      this.scrollToView();\n    }\n  }\n\n  scrollToView(delay = 0) {\n    const { anchorLinkId } = this.props;\n    const directLinkComponent = document.getElementById(anchorLinkId);\n    if (directLinkComponent) {\n      _setTimeout(() => {\n        directLinkComponent.scrollIntoView({\n          block: 'center',\n          behavior: 'smooth' });\n\n      }, delay);\n    }\n  }\n\n  render() {\n    const {\n      anchorLinkId,\n      filters,\n      showShortLinkButton,\n      placement } =\n    this.props;\n    return (\n      ___EmotionJSX(\"span\", { className: \"anchor-link-container\", id: anchorLinkId },\n      showShortLinkButton &&\n      ___EmotionJSX(URLShortLinkButton, {\n        url: getDashboardUrl(\n        window.location.pathname,\n        filters,\n        anchorLinkId),\n\n        emailSubject: t('Superset chart'),\n        emailContent: t('Check out this chart in dashboard:'),\n        placement: placement })));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAnchorLink.propTypes = propTypes;\nAnchorLink.defaultProps = defaultProps;const _default =\n\nAnchorLink;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/components/AnchorLink/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/components/AnchorLink/index.jsx\");reactHotLoader.register(AnchorLink, \"AnchorLink\", \"/app/superset-frontend/src/components/AnchorLink/index.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/components/AnchorLink/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/components/AnchorLink/index.jsx"],"names":["React","PropTypes","t","URLShortLinkButton","getDashboardUrl","getLocationHash","propTypes","anchorLinkId","string","isRequired","filters","object","showShortLinkButton","bool","inFocus","placement","oneOf","defaultProps","AnchorLink","PureComponent","componentDidMount","hash","props","scrollToView","UNSAFE_componentWillReceiveProps","nextProps","delay","directLinkComponent","document","getElementById","scrollIntoView","block","behavior","render","window","location","pathname"],"mappings":"oXAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,CAAT,QAAkB,mBAAlB;;AAEA,OAAOC,kBAAP,MAA+B,mCAA/B;AACA,OAAOC,eAAP,MAA4B,oCAA5B;AACA,OAAOC,eAAP,MAA4B,oCAA5B,C;;AAEA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,YAAY,EAAEN,SAAS,CAACO,MAAV,CAAiBC,UADf;AAEhBC,EAAAA,OAAO,EAAET,SAAS,CAACU,MAFH;AAGhBC,EAAAA,mBAAmB,EAAEX,SAAS,CAACY,IAHf;AAIhBC,EAAAA,OAAO,EAAEb,SAAS,CAACY,IAJH;AAKhBE,EAAAA,SAAS,EAAEd,SAAS,CAACe,KAAV,CAAgB,CAAC,OAAD,EAAU,MAAV,EAAkB,KAAlB,EAAyB,QAAzB,CAAhB,CALK,EAAlB;;;AAQA,MAAMC,YAAY,GAAG;AACnBH,EAAAA,OAAO,EAAE,KADU;AAEnBF,EAAAA,mBAAmB,EAAE,KAFF;AAGnBG,EAAAA,SAAS,EAAE,OAHQ;AAInBL,EAAAA,OAAO,EAAE,EAJU,EAArB;;;AAOA,MAAMQ,UAAN,SAAyBlB,KAAK,CAACmB,aAA/B,CAA6C;AAC3CC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,IAAI,GAAGhB,eAAe,EAA5B;AACA,UAAM,EAAEE,YAAF,KAAmB,KAAKe,KAA9B;;AAEA,QAAID,IAAI,IAAId,YAAY,KAAKc,IAA7B,EAAmC;AACjC,WAAKE,YAAL;AACD;AACF;;AAEDC,EAAAA,gCAAgC,CAACC,SAAD,EAAY;AAC1C,UAAM,EAAEX,OAAO,GAAG,KAAZ,KAAsBW,SAA5B;AACA,QAAIX,OAAJ,EAAa;AACX,WAAKS,YAAL;AACD;AACF;;AAEDA,EAAAA,YAAY,CAACG,KAAK,GAAG,CAAT,EAAY;AACtB,UAAM,EAAEnB,YAAF,KAAmB,KAAKe,KAA9B;AACA,UAAMK,mBAAmB,GAAGC,QAAQ,CAACC,cAAT,CAAwBtB,YAAxB,CAA5B;AACA,QAAIoB,mBAAJ,EAAyB;AACvB,kBAAW,MAAM;AACfA,QAAAA,mBAAmB,CAACG,cAApB,CAAmC;AACjCC,UAAAA,KAAK,EAAE,QAD0B;AAEjCC,UAAAA,QAAQ,EAAE,QAFuB,EAAnC;;AAID,OALD,EAKGN,KALH;AAMD;AACF;;AAEDO,EAAAA,MAAM,GAAG;AACP,UAAM;AACJ1B,MAAAA,YADI;AAEJG,MAAAA,OAFI;AAGJE,MAAAA,mBAHI;AAIJG,MAAAA,SAJI;AAKF,SAAKO,KALT;AAMA;AACE,8BAAM,SAAS,EAAC,uBAAhB,EAAwC,EAAE,EAAEf,YAA5C;AACGK,MAAAA,mBAAmB;AAClB,oBAAC,kBAAD;AACE,QAAA,GAAG,EAAER,eAAe;AAClB8B,QAAAA,MAAM,CAACC,QAAP,CAAgBC,QADE;AAElB1B,QAAAA,OAFkB;AAGlBH,QAAAA,YAHkB,CADtB;;AAME,QAAA,YAAY,EAAEL,CAAC,CAAC,gBAAD,CANjB;AAOE,QAAA,YAAY,EAAEA,CAAC,CAAC,oCAAD,CAPjB;AAQE,QAAA,SAAS,EAAEa,SARb,GAFJ,CADF;;;;;AAgBD,GArD0C;AAAA;AAAA;AAwD7CG,UAAU,CAACZ,SAAX,GAAuBA,SAAvB;AACAY,UAAU,CAACD,YAAX,GAA0BA,YAA1B,C;;AAEeC,U,CAAf,wB,iLA1EMZ,S,qGAQAW,Y,wGAOAC,U","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\n\nimport URLShortLinkButton from 'src/components/URLShortLinkButton';\nimport getDashboardUrl from 'src/dashboard/util/getDashboardUrl';\nimport getLocationHash from 'src/dashboard/util/getLocationHash';\n\nconst propTypes = {\n  anchorLinkId: PropTypes.string.isRequired,\n  filters: PropTypes.object,\n  showShortLinkButton: PropTypes.bool,\n  inFocus: PropTypes.bool,\n  placement: PropTypes.oneOf(['right', 'left', 'top', 'bottom']),\n};\n\nconst defaultProps = {\n  inFocus: false,\n  showShortLinkButton: false,\n  placement: 'right',\n  filters: {},\n};\n\nclass AnchorLink extends React.PureComponent {\n  componentDidMount() {\n    const hash = getLocationHash();\n    const { anchorLinkId } = this.props;\n\n    if (hash && anchorLinkId === hash) {\n      this.scrollToView();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { inFocus = false } = nextProps;\n    if (inFocus) {\n      this.scrollToView();\n    }\n  }\n\n  scrollToView(delay = 0) {\n    const { anchorLinkId } = this.props;\n    const directLinkComponent = document.getElementById(anchorLinkId);\n    if (directLinkComponent) {\n      setTimeout(() => {\n        directLinkComponent.scrollIntoView({\n          block: 'center',\n          behavior: 'smooth',\n        });\n      }, delay);\n    }\n  }\n\n  render() {\n    const {\n      anchorLinkId,\n      filters,\n      showShortLinkButton,\n      placement,\n    } = this.props;\n    return (\n      <span className=\"anchor-link-container\" id={anchorLinkId}>\n        {showShortLinkButton && (\n          <URLShortLinkButton\n            url={getDashboardUrl(\n              window.location.pathname,\n              filters,\n              anchorLinkId,\n            )}\n            emailSubject={t('Superset chart')}\n            emailContent={t('Check out this chart in dashboard:')}\n            placement={placement}\n          />\n        )}\n      </span>\n    );\n  }\n}\n\nAnchorLink.propTypes = propTypes;\nAnchorLink.defaultProps = defaultProps;\n\nexport default AnchorLink;\n"]},"metadata":{},"sourceType":"module"}