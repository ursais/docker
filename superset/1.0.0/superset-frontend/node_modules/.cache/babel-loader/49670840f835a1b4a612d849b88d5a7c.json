{"ast":null,"code":"import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\n\nimport Select from 'src/components/AsyncSelect';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  dataEndpoint: PropTypes.string.isRequired,\n  multi: PropTypes.bool,\n  mutator: PropTypes.func,\n  onAsyncErrorMessage: PropTypes.string,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.string,\n  value: PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.number,\n  PropTypes.arrayOf(PropTypes.string),\n  PropTypes.arrayOf(PropTypes.number)]),\n\n  addDangerToast: PropTypes.func.isRequired };\n\n\nconst defaultProps = {\n  multi: true,\n  onAsyncErrorMessage: t('Error while fetching data'),\n  onChange: () => {},\n  placeholder: t('Select ...') };\n\n\nconst SelectAsyncControl = props => {\n  const {\n    value,\n    onChange,\n    dataEndpoint,\n    multi,\n    mutator,\n    placeholder,\n    onAsyncErrorMessage } =\n  props;\n  const onSelectionChange = options => {\n    let val;\n    if (multi) {var _options$map;\n      val = (_options$map = options == null ? void 0 : _mapInstanceProperty(options).call(options, option => option.value)) != null ? _options$map : null;\n    } else {var _options$value;\n      val = (_options$value = options == null ? void 0 : options.value) != null ? _options$value : null;\n    }\n    onChange(val);\n  };\n\n  return (\n    ___EmotionJSX(\"div\", { \"data-test\": \"SelectAsyncControl\" },\n    ___EmotionJSX(ControlHeader, props),\n    ___EmotionJSX(Select, {\n      dataEndpoint: dataEndpoint,\n      onChange: onSelectionChange,\n      onAsyncError: (errorMsg) =>\n      props.addDangerToast(`${onAsyncErrorMessage}: ${errorMsg}`),\n\n      mutator: mutator,\n      multi: multi,\n      value: value,\n      placeholder: placeholder,\n      valueRenderer: v => ___EmotionJSX(\"div\", null, v.label) })));\n\n\n\n};\n\nSelectAsyncControl.propTypes = propTypes;\nSelectAsyncControl.defaultProps = defaultProps;const _default =\n\nwithToasts(SelectAsyncControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/explore/components/controls/SelectAsyncControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/explore/components/controls/SelectAsyncControl/index.jsx\");reactHotLoader.register(SelectAsyncControl, \"SelectAsyncControl\", \"/app/superset-frontend/src/explore/components/controls/SelectAsyncControl/index.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/explore/components/controls/SelectAsyncControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/explore/components/controls/SelectAsyncControl/index.jsx"],"names":["React","PropTypes","t","Select","ControlHeader","withToasts","propTypes","dataEndpoint","string","isRequired","multi","bool","mutator","func","onAsyncErrorMessage","onChange","placeholder","value","oneOfType","number","arrayOf","addDangerToast","defaultProps","SelectAsyncControl","props","onSelectionChange","options","val","option","errorMsg","v","label"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\n\nimport Select from 'src/components/AsyncSelect';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\n\nconst propTypes = {\n  dataEndpoint: PropTypes.string.isRequired,\n  multi: PropTypes.bool,\n  mutator: PropTypes.func,\n  onAsyncErrorMessage: PropTypes.string,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.string,\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.arrayOf(PropTypes.number),\n  ]),\n  addDangerToast: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  multi: true,\n  onAsyncErrorMessage: t('Error while fetching data'),\n  onChange: () => {},\n  placeholder: t('Select ...'),\n};\n\nconst SelectAsyncControl = props => {\n  const {\n    value,\n    onChange,\n    dataEndpoint,\n    multi,\n    mutator,\n    placeholder,\n    onAsyncErrorMessage,\n  } = props;\n  const onSelectionChange = options => {\n    let val;\n    if (multi) {\n      val = options?.map(option => option.value) ?? null;\n    } else {\n      val = options?.value ?? null;\n    }\n    onChange(val);\n  };\n\n  return (\n    <div data-test=\"SelectAsyncControl\">\n      <ControlHeader {...props} />\n      <Select\n        dataEndpoint={dataEndpoint}\n        onChange={onSelectionChange}\n        onAsyncError={errorMsg =>\n          props.addDangerToast(`${onAsyncErrorMessage}: ${errorMsg}`)\n        }\n        mutator={mutator}\n        multi={multi}\n        value={value}\n        placeholder={placeholder}\n        valueRenderer={v => <div>{v.label}</div>}\n      />\n    </div>\n  );\n};\n\nSelectAsyncControl.propTypes = propTypes;\nSelectAsyncControl.defaultProps = defaultProps;\n\nexport default withToasts(SelectAsyncControl);\n"]},"metadata":{},"sourceType":"module"}