{"ast":null,"code":"import _Object$values from \"@babel/runtime-corejs3/core-js-stable/object/values\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useSelector } from 'react-redux';\nimport EditableTitle from 'src/components/EditableTitle';\nimport SliceHeaderControls from 'src/dashboard/components/SliceHeaderControls';\nimport FiltersBadge from 'src/dashboard/containers/FiltersBadge';\nimport Icon from 'src/components/Icon';\nimport FilterIndicator from 'src/dashboard/components/FiltersBadge/FilterIndicator';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst annotationsLoading = t('Annotation layers are still loading.');\nconst annotationsError = t('One ore more annotation layers failed loading.');\nconst CrossFilterIcon = styled(Icon)`\n  fill: ${({ theme }) => theme.colors.grayscale.light5};\n  & circle {\n    fill: ${({ theme }) => theme.colors.primary.base};\n  }\n`;\nconst SliceHeader = ({ innerRef = null, forceRefresh = () => ({}), updateSliceName = () => ({}), toggleExpandSlice = () => ({}), exploreChart = () => ({}), exportCSV = () => ({}), editMode = false, annotationQuery = {}, annotationError = {}, cachedDttm = null, updatedDttm = null, isCached = [], isExpanded = false, sliceName = '', supersetCanExplore = false, supersetCanShare = false, supersetCanCSV = false, sliceCanEdit = false, exportFullCSV, slice, componentId, dashboardId, addSuccessToast, addDangerToast, handleToggleFullSize, isFullSize, chartStatus, formData }) => {\n  // TODO: change to indicator field after it will be implemented\n  const crossFilterValue = useSelector(state => {var _state$dataMask$slice, _state$dataMask$slice2;return (_state$dataMask$slice = state.dataMask[slice == null ? void 0 : slice.slice_id]) == null ? void 0 : (_state$dataMask$slice2 = _state$dataMask$slice.filterState) == null ? void 0 : _state$dataMask$slice2.value;});\n  return ___EmotionJSX(\"div\", { className: \"chart-header\", \"data-test\": \"slice-header\", ref: innerRef },\n  ___EmotionJSX(\"div\", { className: \"header-title\" },\n  ___EmotionJSX(EditableTitle, { title: sliceName || (\n    editMode ?\n    '---' // this makes an empty title clickable\n    : ''), canEdit: editMode, emptyText: \"\", onSaveTitle: updateSliceName, showTooltip: false }),\n  !!_Object$values(annotationQuery).length && ___EmotionJSX(Tooltip, { id: \"annotations-loading-tooltip\", placement: \"top\", title: annotationsLoading },\n  ___EmotionJSX(\"i\", { role: \"img\", \"aria-label\": annotationsLoading, className: \"fa fa-refresh warning\" })),\n\n  !!_Object$values(annotationError).length && ___EmotionJSX(Tooltip, { id: \"annoation-errors-tooltip\", placement: \"top\", title: annotationsError },\n  ___EmotionJSX(\"i\", { role: \"img\", \"aria-label\": annotationsError, className: \"fa fa-exclamation-circle danger\" }))),\n\n\n  ___EmotionJSX(\"div\", { className: \"header-controls\" },\n  !editMode && ___EmotionJSX(React.Fragment, null,\n  crossFilterValue && ___EmotionJSX(Tooltip, { placement: \"top\", title: ___EmotionJSX(FilterIndicator, { indicator: {\n        value: crossFilterValue,\n        name: t('Emitted values') } }) },\n\n  ___EmotionJSX(CrossFilterIcon, { name: \"cross-filter-badge\" })),\n\n  ___EmotionJSX(FiltersBadge, { chartId: slice.slice_id }),\n  ___EmotionJSX(SliceHeaderControls, { slice: slice, isCached: isCached, isExpanded: isExpanded, cachedDttm: cachedDttm, updatedDttm: updatedDttm, toggleExpandSlice: toggleExpandSlice, forceRefresh: forceRefresh, exploreChart: exploreChart, exportCSV: exportCSV, exportFullCSV: exportFullCSV, supersetCanExplore: supersetCanExplore, supersetCanShare: supersetCanShare, supersetCanCSV: supersetCanCSV, sliceCanEdit: sliceCanEdit, componentId: componentId, dashboardId: dashboardId, addSuccessToast: addSuccessToast, addDangerToast: addDangerToast, handleToggleFullSize: handleToggleFullSize, isFullSize: isFullSize, chartStatus: chartStatus, formData: formData }))));\n\n\n\n};__signature__(SliceHeader, \"useSelector{crossFilterValue}\", () => [useSelector]);const _default =\nSliceHeader;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(annotationsLoading, \"annotationsLoading\", \"/app/superset-frontend/src/dashboard/components/SliceHeader/index.tsx\");reactHotLoader.register(annotationsError, \"annotationsError\", \"/app/superset-frontend/src/dashboard/components/SliceHeader/index.tsx\");reactHotLoader.register(CrossFilterIcon, \"CrossFilterIcon\", \"/app/superset-frontend/src/dashboard/components/SliceHeader/index.tsx\");reactHotLoader.register(SliceHeader, \"SliceHeader\", \"/app/superset-frontend/src/dashboard/components/SliceHeader/index.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/dashboard/components/SliceHeader/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/dashboard/components/SliceHeader/index.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useSelector } from 'react-redux';\nimport EditableTitle from 'src/components/EditableTitle';\nimport SliceHeaderControls from 'src/dashboard/components/SliceHeaderControls';\nimport FiltersBadge from 'src/dashboard/containers/FiltersBadge';\nimport Icon from 'src/components/Icon';\nimport { RootState } from 'src/dashboard/types';\nimport FilterIndicator from 'src/dashboard/components/FiltersBadge/FilterIndicator';\n\ntype SliceHeaderProps = {\n  innerRef?: string;\n  slice: {\n    description: string;\n    viz_type: string;\n    slice_name: string;\n    slice_id: number;\n    slice_description: string;\n  };\n  isExpanded?: boolean;\n  isCached?: boolean[];\n  cachedDttm?: string[];\n  updatedDttm?: number;\n  updateSliceName?: (arg0: string) => void;\n  toggleExpandSlice?: () => void;\n  forceRefresh?: () => void;\n  exploreChart?: () => void;\n  exportCSV?: () => void;\n  exportFullCSV?: () => void;\n  editMode?: boolean;\n  isFullSize?: boolean;\n  annotationQuery?: object;\n  annotationError?: object;\n  sliceName?: string;\n  supersetCanExplore?: boolean;\n  supersetCanShare?: boolean;\n  supersetCanCSV?: boolean;\n  sliceCanEdit?: boolean;\n  componentId: string;\n  dashboardId: number;\n  filters: object;\n  addSuccessToast: () => void;\n  addDangerToast: () => void;\n  handleToggleFullSize: () => void;\n  chartStatus: string;\n  formData: object;\n};\n\nconst annotationsLoading = t('Annotation layers are still loading.');\nconst annotationsError = t('One ore more annotation layers failed loading.');\n\nconst CrossFilterIcon = styled(Icon)`\n  fill: ${({ theme }) => theme.colors.grayscale.light5};\n  & circle {\n    fill: ${({ theme }) => theme.colors.primary.base};\n  }\n`;\n\nconst SliceHeader: FC<SliceHeaderProps> = ({\n  innerRef = null,\n  forceRefresh = () => ({}),\n  updateSliceName = () => ({}),\n  toggleExpandSlice = () => ({}),\n  exploreChart = () => ({}),\n  exportCSV = () => ({}),\n  editMode = false,\n  annotationQuery = {},\n  annotationError = {},\n  cachedDttm = null,\n  updatedDttm = null,\n  isCached = [],\n  isExpanded = false,\n  sliceName = '',\n  supersetCanExplore = false,\n  supersetCanShare = false,\n  supersetCanCSV = false,\n  sliceCanEdit = false,\n  exportFullCSV,\n  slice,\n  componentId,\n  dashboardId,\n  addSuccessToast,\n  addDangerToast,\n  handleToggleFullSize,\n  isFullSize,\n  chartStatus,\n  formData,\n}) => {\n  // TODO: change to indicator field after it will be implemented\n  const crossFilterValue = useSelector<RootState, any>(\n    state => state.dataMask[slice?.slice_id]?.filterState?.value,\n  );\n\n  return (\n    <div className=\"chart-header\" data-test=\"slice-header\" ref={innerRef}>\n      <div className=\"header-title\">\n        <EditableTitle\n          title={\n            sliceName ||\n            (editMode\n              ? '---' // this makes an empty title clickable\n              : '')\n          }\n          canEdit={editMode}\n          emptyText=\"\"\n          onSaveTitle={updateSliceName}\n          showTooltip={false}\n        />\n        {!!Object.values(annotationQuery).length && (\n          <Tooltip\n            id=\"annotations-loading-tooltip\"\n            placement=\"top\"\n            title={annotationsLoading}\n          >\n            <i\n              role=\"img\"\n              aria-label={annotationsLoading}\n              className=\"fa fa-refresh warning\"\n            />\n          </Tooltip>\n        )}\n        {!!Object.values(annotationError).length && (\n          <Tooltip\n            id=\"annoation-errors-tooltip\"\n            placement=\"top\"\n            title={annotationsError}\n          >\n            <i\n              role=\"img\"\n              aria-label={annotationsError}\n              className=\"fa fa-exclamation-circle danger\"\n            />\n          </Tooltip>\n        )}\n      </div>\n      <div className=\"header-controls\">\n        {!editMode && (\n          <>\n            {crossFilterValue && (\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <FilterIndicator\n                    indicator={{\n                      value: crossFilterValue,\n                      name: t('Emitted values'),\n                    }}\n                  />\n                }\n              >\n                <CrossFilterIcon name=\"cross-filter-badge\" />\n              </Tooltip>\n            )}\n            <FiltersBadge chartId={slice.slice_id} />\n            <SliceHeaderControls\n              slice={slice}\n              isCached={isCached}\n              isExpanded={isExpanded}\n              cachedDttm={cachedDttm}\n              updatedDttm={updatedDttm}\n              toggleExpandSlice={toggleExpandSlice}\n              forceRefresh={forceRefresh}\n              exploreChart={exploreChart}\n              exportCSV={exportCSV}\n              exportFullCSV={exportFullCSV}\n              supersetCanExplore={supersetCanExplore}\n              supersetCanShare={supersetCanShare}\n              supersetCanCSV={supersetCanCSV}\n              sliceCanEdit={sliceCanEdit}\n              componentId={componentId}\n              dashboardId={dashboardId}\n              addSuccessToast={addSuccessToast}\n              addDangerToast={addDangerToast}\n              handleToggleFullSize={handleToggleFullSize}\n              isFullSize={isFullSize}\n              chartStatus={chartStatus}\n              formData={formData}\n            />\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SliceHeader;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}