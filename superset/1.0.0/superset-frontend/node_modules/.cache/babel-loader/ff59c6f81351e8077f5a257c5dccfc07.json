{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _findIndexInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/find-index\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect } from 'react';\nexport function useQueryPreviewState({ queries, fetchData, currentQueryId }) {\n  const index = _findIndexInstanceProperty(queries).call(queries, query => query.id === currentQueryId);\n  const [currentIndex, setCurrentIndex] = useState(index);\n  const [disablePrevious, setDisablePrevious] = useState(false);\n  const [disableNext, setDisableNext] = useState(false);\n  function checkIndex() {\n    setDisablePrevious(currentIndex === 0);\n    setDisableNext(currentIndex === queries.length - 1);\n  }\n  function handleDataChange(previous) {\n    const offset = previous ? -1 : 1;\n    const index = currentIndex + offset;\n    if (index >= 0 && index < queries.length) {\n      fetchData(queries[index].id);\n      setCurrentIndex(index);\n      checkIndex();\n    }\n  }\n  function handleKeyPress(ev) {\n    if (currentIndex >= 0 && currentIndex < queries.length) {\n      if (ev.key === 'ArrowDown' || ev.key === 'k') {\n        ev.preventDefault();\n        handleDataChange(false);\n      } else\n      if (ev.key === 'ArrowUp' || ev.key === 'j') {\n        ev.preventDefault();\n        handleDataChange(true);\n      }\n    }\n  }\n  useEffect(() => {\n    checkIndex();\n  });\n  return {\n    handleKeyPress,\n    handleDataChange,\n    disablePrevious,\n    disableNext };\n\n}__signature__(useQueryPreviewState, \"useState{[currentIndex, setCurrentIndex](index)}\\nuseState{[disablePrevious, setDisablePrevious](false)}\\nuseState{[disableNext, setDisableNext](false)}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(useQueryPreviewState, \"useQueryPreviewState\", \"/app/superset-frontend/src/views/CRUD/data/hooks.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/app/superset-frontend/src/views/CRUD/data/hooks.ts"],"names":[],"mappings":"ocAAA;;;;;;;;;;;;;;;;;AAiBG;AACH,SAAS,QAAT,EAAmB,SAAnB,QAAoC,OAApC;AAKA,OAAM,SAAU,oBAAV,CAAgE,EACpE,OADoE,EAEpE,SAFoE,EAGpE,cAHoE,EAAhE,EAQL;AACC,QAAM,KAAK,GAAG,2BAAA,OAAO,MAAP,CAAA,OAAO,EAAW,KAAK,IAAI,KAAK,CAAC,EAAN,KAAa,cAAjC,CAArB;AACA,QAAM,CAAC,YAAD,EAAe,eAAf,IAAkC,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAAC,eAAD,EAAkB,kBAAlB,IAAwC,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAAC,WAAD,EAAc,cAAd,IAAgC,QAAQ,CAAC,KAAD,CAA9C;AAEA,WAAS,UAAT,GAAmB;AACjB,IAAA,kBAAkB,CAAC,YAAY,KAAK,CAAlB,CAAlB;AACA,IAAA,cAAc,CAAC,YAAY,KAAK,OAAO,CAAC,MAAR,GAAiB,CAAnC,CAAd;AACD;AAED,WAAS,gBAAT,CAA0B,QAA1B,EAA2C;AACzC,UAAM,MAAM,GAAG,QAAQ,GAAG,CAAC,CAAJ,GAAQ,CAA/B;AACA,UAAM,KAAK,GAAG,YAAY,GAAG,MAA7B;AACA,QAAI,KAAK,IAAI,CAAT,IAAc,KAAK,GAAG,OAAO,CAAC,MAAlC,EAA0C;AACxC,MAAA,SAAS,CAAC,OAAO,CAAC,KAAD,CAAP,CAAe,EAAhB,CAAT;AACA,MAAA,eAAe,CAAC,KAAD,CAAf;AACA,MAAA,UAAU;AACX;AACF;AAED,WAAS,cAAT,CAAwB,EAAxB,EAA+B;AAC7B,QAAI,YAAY,IAAI,CAAhB,IAAqB,YAAY,GAAG,OAAO,CAAC,MAAhD,EAAwD;AACtD,UAAI,EAAE,CAAC,GAAH,KAAW,WAAX,IAA0B,EAAE,CAAC,GAAH,KAAW,GAAzC,EAA8C;AAC5C,QAAA,EAAE,CAAC,cAAH;AACA,QAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,OAHD;AAGO,UAAI,EAAE,CAAC,GAAH,KAAW,SAAX,IAAwB,EAAE,CAAC,GAAH,KAAW,GAAvC,EAA4C;AACjD,QAAA,EAAE,CAAC,cAAH;AACA,QAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD;AACF;AACF;AAED,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,UAAU;AACX,GAFQ,CAAT;AAIA,SAAO;AACL,IAAA,cADK;AAEL,IAAA,gBAFK;AAGL,IAAA,eAHK;AAIL,IAAA,WAJK,EAAP;;AAMD,C,cAnDe,oB,4VAAA,oB","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect } from 'react';\n\ntype BaseQueryObject = {\n  id: number;\n};\nexport function useQueryPreviewState<D extends BaseQueryObject = any>({\n  queries,\n  fetchData,\n  currentQueryId,\n}: {\n  queries: D[];\n  fetchData: (id: number) => any;\n  currentQueryId: number;\n}) {\n  const index = queries.findIndex(query => query.id === currentQueryId);\n  const [currentIndex, setCurrentIndex] = useState(index);\n  const [disablePrevious, setDisablePrevious] = useState(false);\n  const [disableNext, setDisableNext] = useState(false);\n\n  function checkIndex() {\n    setDisablePrevious(currentIndex === 0);\n    setDisableNext(currentIndex === queries.length - 1);\n  }\n\n  function handleDataChange(previous: boolean) {\n    const offset = previous ? -1 : 1;\n    const index = currentIndex + offset;\n    if (index >= 0 && index < queries.length) {\n      fetchData(queries[index].id);\n      setCurrentIndex(index);\n      checkIndex();\n    }\n  }\n\n  function handleKeyPress(ev: any) {\n    if (currentIndex >= 0 && currentIndex < queries.length) {\n      if (ev.key === 'ArrowDown' || ev.key === 'k') {\n        ev.preventDefault();\n        handleDataChange(false);\n      } else if (ev.key === 'ArrowUp' || ev.key === 'j') {\n        ev.preventDefault();\n        handleDataChange(true);\n      }\n    }\n  }\n\n  useEffect(() => {\n    checkIndex();\n  });\n\n  return {\n    handleKeyPress,\n    handleDataChange,\n    disablePrevious,\n    disableNext,\n  };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}